<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/favicon.png" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed"><link rel="stylesheet" href="/css/style.css" type="text/css">

		

		<link rel="stylesheet" href="/_app/assets/start-61d1577b.css">
		<link rel="stylesheet" href="/_app/assets/pages/__layout.svelte-3ab4768d.css">

		
	</head>
	<body>
		<div id="svelte">




<header><nav role="navigation" class="navbar svelte-d1vz7p"><a class="nav-link svelte-d1vz7p" href="/">Home</a>
		<ul class="svelte-d1vz7p">
			<li class="svelte-d1vz7p"><a href="/blog/" class="nav-link svelte-d1vz7p">Articles</a></li>
			
			<li class="svelte-d1vz7p"><a href="/about" class="nav-link svelte-d1vz7p">About</a></li></ul></nav>
</header>

<main class="main"><div class="content"><article class="post"><header><h1>Back to GH Pages</h1>
		<span class="post-date">February 21, 2021</span></header>
	<p>The only thing I was using GCP for was hosting this blog which is statically generated by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a>. As that work flow is a lot easier on Github Pages I decided to move it back there and at the same time make some improvements to my workflow.</p>
<p>There is a similar story with Ruby which I only use for running Jekyll. To make life a bit simpler and to avoid having to relearn how to get things to run everytime I want to update I decided to look into running it in Docker instead. Unfortunately the <code>jekyll/jekyll</code> Docker images didnâ€™t seem to enjoy running on an M1 Mac yet so I used the <code>ruby:2.7.2</code> image instead.</p>
<div class="highlighter-rouge language-Dockerfile"><div class="highlight"><pre class="highlight"><code><span class="hljs-comment"># Use Ruby image instead of jekyll/jekyll for arm-64 support</span>
<span class="hljs-keyword">FROM</span> ruby:<span class="hljs-number">2.7</span>.<span class="hljs-number">2</span>

<span class="hljs-keyword">RUN</span><span class="language-bash">gem install bundler:1.17.2 jekyll:4.0 jekyll-redirect-from</span>

<span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">4000</span>

<span class="hljs-keyword">CMD</span><span class="language-bash">bundle <span class="hljs-built_in">exec</span> jekyll serve -H 0.0.0.0</span></code></pre></div></div>
<p>And to preview the site, I run it with:</p>
<div class="highlighter-rouge language-bash"><div class="highlight"><pre class="highlight"><code>docker container run --<span class="hljs-built_in">rm</span> -p 4000:4000 -p 35729:35729 -it                     \
                     -v <span class="hljs-string">&quot;<span class="hljs-subst">$(pwd)</span>&quot;</span>:<span class="hljs-string">&quot;<span class="hljs-subst">$(pwd)</span>&quot;</span> -w <span class="hljs-string">&quot;<span class="hljs-subst">$(pwd)</span>&quot;</span> $(docker build -q .)    \
                     jekyll serve -H 0.0.0.0 --livereload</code></pre></div></div></article></div></main>

<footer class="site-footer svelte-1h9y0mo"><div class="author svelte-1h9y0mo"><img class="author-photo svelte-1h9y0mo" src="/images/hallski.jpg" width="192" height="192" alt="Author">
		<div><p class="author-name svelte-1h9y0mo">Mikael Hallendal</p>
			<p class="author-info svelte-1h9y0mo">Developer who loves to learn new things.</p>
			<p class="author-interests svelte-1h9y0mo">Current focus: <span class="interest svelte-1h9y0mo">React</span>,
				<span class="interest svelte-1h9y0mo">Javascript/Typescript</span> and
				<span class="interest svelte-1h9y0mo">Elixir</span></p>
			<nav class="find-me svelte-1h9y0mo"><a href="http://github.com/hallski/" class="svelte-1h9y0mo">Github</a>
				<a href="http://twitter.com/mhallendal/" class="svelte-1h9y0mo">Twitter</a>
				<a href="http://www.linkedin.com/in/mhallendal" class="svelte-1h9y0mo">LinkedIn</a></nav></div></div>
</footer>



			
		</div>
	</body>
</html>
