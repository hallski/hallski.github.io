import{S as k,i as v,s as w,w as g,f as $,m as M,j as q,k as b,q as x,n as T,o as H,P as y,e as m,g as f,a as j,b as i,d as r}from"./vendor-952ab843.js";import{B as I}from"./blog-layout-d30acb2f.js";function P(c){let s,l,n,p,e,t,u,h,d;return{c(){s=m("p"),s.innerHTML='The only thing I was using GCP for was hosting this blog which is statically generated by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a>. As that work flow is a lot easier on Github Pages I decided to move it back there and at the same time make some improvements to my workflow.',l=f(),n=m("p"),n.innerHTML="There is a similar story with Ruby which I only use for running Jekyll. To make life a bit simpler and to avoid having to relearn how to get things to run everytime I want to update I decided to look into running it in Docker instead. Unfortunately the <code>jekyll/jekyll</code> Docker images didn\u2019t seem to enjoy running on an M1 Mac yet so I used the <code>ruby:2.7.2</code> image instead.",p=f(),e=m("div"),e.innerHTML=`<div class="highlight"><pre class="highlight"><code><span class="hljs-comment"># Use Ruby image instead of jekyll/jekyll for arm-64 support</span>
<span class="hljs-keyword">FROM</span> ruby:<span class="hljs-number">2.7</span>.<span class="hljs-number">2</span>

<span class="hljs-keyword">RUN</span><span class="language-bash">gem install bundler:1.17.2 jekyll:4.0 jekyll-redirect-from</span>

<span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">4000</span>

<span class="hljs-keyword">CMD</span><span class="language-bash">bundle <span class="hljs-built_in">exec</span> jekyll serve -H 0.0.0.0</span></code></pre></div>`,t=f(),u=m("p"),u.textContent="And to preview the site, I run it with:",h=f(),d=m("div"),d.innerHTML=`<div class="highlight"><pre class="highlight"><code>docker container run --<span class="hljs-built_in">rm</span> -p 4000:4000 -p 35729:35729 -it                     \\
                     -v <span class="hljs-string">&quot;<span class="hljs-subst">$(pwd)</span>&quot;</span>:<span class="hljs-string">&quot;<span class="hljs-subst">$(pwd)</span>&quot;</span> -w <span class="hljs-string">&quot;<span class="hljs-subst">$(pwd)</span>&quot;</span> $(docker build -q .)    \\
                     jekyll serve -H 0.0.0.0 --livereload</code></pre></div>`,j(e,"class","highlighter-rouge language-Dockerfile"),j(d,"class","highlighter-rouge language-bash")},m(a,o){i(a,s,o),i(a,l,o),i(a,n,o),i(a,p,o),i(a,e,o),i(a,t,o),i(a,u,o),i(a,h,o),i(a,d,o)},d(a){a&&r(s),a&&r(l),a&&r(n),a&&r(p),a&&r(e),a&&r(t),a&&r(u),a&&r(h),a&&r(d)}}}function B(c){let s,l;const n=[c[0],_];let p={$$slots:{default:[P]},$$scope:{ctx:c}};for(let e=0;e<n.length;e+=1)p=g(p,n[e]);return s=new I({props:p}),{c(){$(s.$$.fragment)},m(e,t){M(s,e,t),l=!0},p(e,[t]){const u=t&1?q(n,[t&1&&b(e[0]),t&0&&b(_)]):{};t&2&&(u.$$scope={dirty:t,ctx:e}),s.$set(u)},i(e){l||(x(s.$$.fragment,e),l=!0)},o(e){T(s.$$.fragment,e),l=!1},d(e){H(s,e)}}}const _={date:"2021-02-21T00:00:00.000Z",section:"blog",title:"Back to GH Pages",excerpt:"Moved my blog back to Github Pages after a few years of running it from Google Platform."};function G(c,s,l){return c.$$set=n=>{l(0,s=g(g({},s),y(n)))},s=y(s),[s]}class S extends k{constructor(s){super();v(this,s,G,B,w,{})}}var L=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:S,metadata:_});export{S as B,L as _,_ as m};
