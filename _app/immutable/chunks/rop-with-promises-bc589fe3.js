import{S as hn,i as pn,s as fn,k as r,q as t,a as v,l as o,m as n,r as a,h as s,c as m,n as i,F as dn,b as h,D as e,B as yr}from"./index-57d6417f.js";function un(cn){let P,ra,W,oa,na,tt,ia,ca,It,B,ha,Ct,J,q,Z,p,z,pa,fa,K,da,ua,Q,va,ma,X,Ea,_a,Y,wa,ya,ee,ga,ka,te,ba,Pa,ae,Sa,ja,S,Aa,se,Na,Oa,le,Ia,Ca,Ta,re,Da,Fa,oe,xa,Ra,ne,Ha,Ja,ie,La,Ga,ce,Va,$a,he,Ma,Ua,pe,Wa,Ba,T,qa,fe,Za,za,Ka,de,Qa,Xa,ue,Ya,es,Tt,y,at,ts,as,st,ss,ls,lt,rs,os,rt,ns,is,ot,cs,Dt,L,hs,G,ps,Ft,ve,fs,xt,D,ds,V,us,vs,Rt,j,ms,nt,Es,_s,it,ws,ys,Ht,me,gs,Jt,F,Ee,gr,ks,ct,bs,Lt,w,Ps,ht,Ss,js,pt,As,Ns,ft,Os,Is,dt,Cs,Ts,ut,Ds,Fs,vt,xs,Rs,Gt,_e,Hs,Vt,A,Js,mt,Ls,Gs,Et,Vs,$s,$t,g,Ms,_t,Us,Ws,wt,Bs,qs,yt,Zs,zs,gt,Ks,Qs,Mt,$,we,ye,u,ge,Xs,Ys,ke,el,tl,be,al,sl,Pe,ll,rl,Se,ol,nl,je,il,cl,Ae,hl,pl,Ne,fl,dl,Oe,ul,vl,Ie,ml,El,Ce,_l,wl,Te,yl,gl,Ut,x,kl,kt,bl,Pl,Wt,M,De,Fe,d,xe,Sl,jl,Re,Al,Nl,bt,Ol,He,Il,Cl,Je,Tl,Dl,Le,Fl,xl,Ge,Rl,Hl,Ve,Jl,Ll,$e,Gl,Vl,Me,$l,Ml,Ue,Ul,Wl,We,Bl,ql,R,Zl,Be,zl,Kl,Ql,Bt,k,Xl,Pt,Yl,er,St,tr,ar,jt,sr,lr,At,rr,or,qt,qe,nr,Zt,N,ir,Nt,cr,hr,Ot,pr,fr,zt,Ze,dr,Kt,ze,ur,Qt,H,vr,U,mr,Er,Xt,Ke,_r;return{c(){P=r("p"),ra=t("In the last post "),W=r("a"),oa=t("Building Interactions with GCF"),na=t(", I focused on the implementation of the various interactions. This post will focus on the control flow and the use of Javascript "),tt=r("em"),ia=t("promises"),ca=t(" to chain the operations together in a readable way."),It=v(),B=r("p"),ha=t("To repeat, this is the resulting GCF event handler:"),Ct=v(),J=r("div"),q=r("div"),Z=r("pre"),p=r("code"),z=r("span"),pa=t("exports"),fa=t("."),K=r("span"),da=t("catFinder"),ua=t(" = "),Q=r("span"),va=t("filteredEventHandler"),ma=t("(eventFilter, "),X=r("span"),Ea=t("function"),_a=t(" ("),Y=r("span"),wa=t("event, callback"),ya=t(`) {
	`),ee=r("span"),ga=t("const"),ka=t(" file = event."),te=r("span"),ba=t("data"),Pa=t(`
	`),ae=r("span"),Sa=t("const"),ja=t(" storageUri = "),S=r("span"),Aa=t("`gs://"),se=r("span"),Na=t("${file.bucket}"),Oa=t("/"),le=r("span"),Ia=t("${file.name}"),Ca=t("`"),Ta=t(`

	`),re=r("span"),Da=t("return"),Fa=t(" "),oe=r("span"),xa=t("visionFetchLabels"),Ra=t(`(storageUri)
		.`),ne=r("span"),Ha=t("then"),Ja=t("("),ie=r("span"),La=t("any"),Ga=t(`(isCat))
		.`),ce=r("span"),Va=t("then"),$a=t("("),he=r("span"),Ma=t("notifySlack"),Ua=t("(secrets."),pe=r("span"),Wa=t("slackWebhook"),Ba=t(", "),T=r("span"),qa=t("`A cat was posted: "),fe=r("span"),Za=t("${storageUri}"),za=t("`"),Ka=t(`))
		.`),de=r("span"),Qa=t("then"),Xa=t(`(logSuccess, logError)
		.`),ue=r("span"),Ya=t("then"),es=t(`(callback)
})`),Tt=v(),y=r("ol"),at=r("li"),ts=t("Fetch the labels through Vision API"),as=v(),st=r("li"),ss=t("If any of the labels match a cat"),ls=v(),lt=r("li"),rs=t("Send a notification to the Slack through an incoming webhook"),os=v(),rt=r("li"),ns=t("If all succeeded, log that. Otherwise log if there was an error."),is=v(),ot=r("li"),cs=t("Finally, call the provided callback."),Dt=v(),L=r("p"),hs=t("The code can be found on "),G=r("a"),ps=t("Github"),Ft=v(),ve=r("h2"),fs=t("Railway Oriented Programming (ROP)"),xt=v(),D=r("p"),ds=t("The inspiration for this implementation was taken from an excellent talk by Scott Wlaschin about "),V=r("a"),us=t("Railway Oriented Programming"),vs=t(". For a more in-depth description of ROP, I can highly recommend watching the talk and slides. The examples are in F# but shouldn’t be a problem to follow even if you are new to the language."),Rt=v(),j=r("p"),ms=t("In short, the idea is to describe the happy path through a process as the main "),nt=r("em"),Es=t("track"),_s=t(" and if an error occurs, the flow is shifted over to a secondary "),it=r("em"),ws=t("error track"),ys=t(". Once on the error track, the flow will stay there until delt with. This could either be by logging an error or by handling the error and shifting the flow back onto the main track."),Ht=v(),me=r("p"),gs=t("To better illustrate what this means for the code above, here it is described as the two tracks."),Jt=v(),F=r("p"),Ee=r("img"),ks=v(),ct=r("em"),bs=t("(Graphics comes from Scotts presentation)."),Lt=v(),w=r("p"),Ps=t("The flow starts on the green (above) track and any of "),ht=r("code"),Ss=t("visionFetchLabels"),js=t(", "),pt=r("code"),As=t("any(isCat)"),Ns=t(" and "),ft=r("code"),Os=t("notifySlack"),Is=t(" can shift the flow over to the red (below) track. At the end, the "),dt=r("code"),Cs=t("logSuccess"),Ts=t(" function is called in the green track and "),ut=r("code"),Ds=t("logError"),Fs=t(" is called on the red track. After that, the tracks are again merged and "),vt=r("code"),xs=t("callback"),Rs=t(" is called."),Gt=v(),_e=r("h2"),Hs=t("ROP with Javascript promises"),Vt=v(),A=r("p"),Js=t("Javascript promises lends themselves very well to this style of programming where a "),mt=r("code"),Ls=t("resolve"),Gs=t(" keeps the flow on the happy track and a "),Et=r("code"),Vs=t("reject"),$s=t(" shifts flow to the error track."),$t=v(),g=r("p"),Ms=t("This can best be seen in the implementation of "),_t=r("code"),Us=t("any"),Ws=t(". It’s a function that takes a "),wt=r("code"),Bs=t("predicate"),qs=t(" and returns a new function expecting an array of items. If the predicate is true for any of the items, a "),yt=r("em"),Zs=t("resolved"),zs=t(" promise is returned (stay on the happy track), otherwise a "),gt=r("em"),Ks=t("rejected"),Qs=t(" promise is returned (move to error track)."),Mt=v(),$=r("div"),we=r("div"),ye=r("pre"),u=r("code"),ge=r("span"),Xs=t("function"),Ys=t(" "),ke=r("span"),el=t("any"),tl=t("("),be=r("span"),al=t("predicate"),sl=t(`) {
	`),Pe=r("span"),ll=t("return"),rl=t(" "),Se=r("span"),ol=t("function"),nl=t(" ("),je=r("span"),il=t("items"),cl=t(`) {
		`),Ae=r("span"),hl=t("return"),pl=t(" items."),Ne=r("span"),fl=t("find"),dl=t("(predicate) ? "),Oe=r("span"),ul=t("Promise"),vl=t("."),Ie=r("span"),ml=t("resolve"),El=t("(items) : "),Ce=r("span"),_l=t("Promise"),wl=t("."),Te=r("span"),yl=t("reject"),gl=t(`()
	}
}`),Ut=v(),x=r("p"),kl=t("The image not containing a cat isn’t really an error, which is why no error is passed in the rejection. The "),kt=r("code"),bl=t("logError"),Pl=t(" function checks if it gets an error and logs it if it does, otherwise does nothing."),Wt=v(),M=r("div"),De=r("div"),Fe=r("pre"),d=r("code"),xe=r("span"),Sl=t("function"),jl=t(" "),Re=r("span"),Al=t("logSuccess"),Nl=t("("),bt=r("span"),Ol=t(`) {
	`),He=r("span"),Il=t("console"),Cl=t("."),Je=r("span"),Tl=t("log"),Dl=t("("),Le=r("span"),Fl=t("`Successfully sent a cat to slack`"),xl=t(`)
}

`),Ge=r("span"),Rl=t("function"),Hl=t(" "),Ve=r("span"),Jl=t("logError"),Ll=t("("),$e=r("span"),Gl=t("error"),Vl=t(`) {
	`),Me=r("span"),$l=t("if"),Ml=t(` (error) {
		`),Ue=r("span"),Ul=t("console"),Wl=t("."),We=r("span"),Bl=t("error"),ql=t("("),R=r("span"),Zl=t("`Function failed with: "),Be=r("span"),zl=t("${error.message}"),Kl=t("`"),Ql=t(`)
	}
}`),Bt=v(),k=r("p"),Xl=t("Finally, as neither "),Pt=r("code"),Yl=t("logSuccess"),er=t(" or "),St=r("code"),tr=t("logError"),ar=t(" returns a rejection, they will both be wrapped in a "),jt=r("code"),sr=t("resolve"),lr=t(" and are both on the happy track again for finally calling "),At=r("code"),rr=t("callback"),or=t("."),qt=v(),qe=r("h2"),nr=t("Higher order functions and ROP"),Zt=v(),N=r("p"),ir=t("Both "),Nt=r("code"),cr=t("any"),hr=t(" and "),Ot=r("code"),pr=t("notifySlack"),fr=t(" are higher order functions (returns new functions). The reason for this is that the flow through the happy track only allows for passing one value on to the next function."),zt=v(),Ze=r("p"),dr=t("This is a very common scenario but might take some getting used to if you are comming from an OOP background, I know it did for me at least."),Kt=v(),ze=r("h2"),ur=t("Extra nice in Javascript"),Qt=v(),H=r("p"),vr=t("This style of programming would work in any language with support for an "),U=r("a"),mr=t("Either type"),Er=t(" and higher order functions."),Xt=v(),Ke=r("p"),_r=t("However, with promises you get an extra level of power since asynchronous operations can be modelled as well. With Javascript including promises out of the box, Node.js and third party frameworks all have great support for them and this style of programming can be a great option for a wide array of applications."),this.h()},l(l){P=o(l,"P",{});var c=n(P);ra=a(c,"In the last post "),W=o(c,"A",{href:!0});var kr=n(W);oa=a(kr,"Building Interactions with GCF"),kr.forEach(s),na=a(c,", I focused on the implementation of the various interactions. This post will focus on the control flow and the use of Javascript "),tt=o(c,"EM",{});var br=n(tt);ia=a(br,"promises"),br.forEach(s),ca=a(c," to chain the operations together in a readable way."),c.forEach(s),It=m(l),B=o(l,"P",{});var Pr=n(B);ha=a(Pr,"To repeat, this is the resulting GCF event handler:"),Pr.forEach(s),Ct=m(l),J=o(l,"DIV",{class:!0});var Sr=n(J);q=o(Sr,"DIV",{class:!0});var jr=n(q);Z=o(jr,"PRE",{class:!0});var Ar=n(Z);p=o(Ar,"CODE",{});var f=n(p);z=o(f,"SPAN",{class:!0});var Nr=n(z);pa=a(Nr,"exports"),Nr.forEach(s),fa=a(f,"."),K=o(f,"SPAN",{class:!0});var Or=n(K);da=a(Or,"catFinder"),Or.forEach(s),ua=a(f," = "),Q=o(f,"SPAN",{class:!0});var Ir=n(Q);va=a(Ir,"filteredEventHandler"),Ir.forEach(s),ma=a(f,"(eventFilter, "),X=o(f,"SPAN",{class:!0});var Cr=n(X);Ea=a(Cr,"function"),Cr.forEach(s),_a=a(f," ("),Y=o(f,"SPAN",{class:!0});var Tr=n(Y);wa=a(Tr,"event, callback"),Tr.forEach(s),ya=a(f,`) {
	`),ee=o(f,"SPAN",{class:!0});var Dr=n(ee);ga=a(Dr,"const"),Dr.forEach(s),ka=a(f," file = event."),te=o(f,"SPAN",{class:!0});var Fr=n(te);ba=a(Fr,"data"),Fr.forEach(s),Pa=a(f,`
	`),ae=o(f,"SPAN",{class:!0});var xr=n(ae);Sa=a(xr,"const"),xr.forEach(s),ja=a(f," storageUri = "),S=o(f,"SPAN",{class:!0});var Qe=n(S);Aa=a(Qe,"`gs://"),se=o(Qe,"SPAN",{class:!0});var Rr=n(se);Na=a(Rr,"${file.bucket}"),Rr.forEach(s),Oa=a(Qe,"/"),le=o(Qe,"SPAN",{class:!0});var Hr=n(le);Ia=a(Hr,"${file.name}"),Hr.forEach(s),Ca=a(Qe,"`"),Qe.forEach(s),Ta=a(f,`

	`),re=o(f,"SPAN",{class:!0});var Jr=n(re);Da=a(Jr,"return"),Jr.forEach(s),Fa=a(f," "),oe=o(f,"SPAN",{class:!0});var Lr=n(oe);xa=a(Lr,"visionFetchLabels"),Lr.forEach(s),Ra=a(f,`(storageUri)
		.`),ne=o(f,"SPAN",{class:!0});var Gr=n(ne);Ha=a(Gr,"then"),Gr.forEach(s),Ja=a(f,"("),ie=o(f,"SPAN",{class:!0});var Vr=n(ie);La=a(Vr,"any"),Vr.forEach(s),Ga=a(f,`(isCat))
		.`),ce=o(f,"SPAN",{class:!0});var $r=n(ce);Va=a($r,"then"),$r.forEach(s),$a=a(f,"("),he=o(f,"SPAN",{class:!0});var Mr=n(he);Ma=a(Mr,"notifySlack"),Mr.forEach(s),Ua=a(f,"(secrets."),pe=o(f,"SPAN",{class:!0});var Ur=n(pe);Wa=a(Ur,"slackWebhook"),Ur.forEach(s),Ba=a(f,", "),T=o(f,"SPAN",{class:!0});var Yt=n(T);qa=a(Yt,"`A cat was posted: "),fe=o(Yt,"SPAN",{class:!0});var Wr=n(fe);Za=a(Wr,"${storageUri}"),Wr.forEach(s),za=a(Yt,"`"),Yt.forEach(s),Ka=a(f,`))
		.`),de=o(f,"SPAN",{class:!0});var Br=n(de);Qa=a(Br,"then"),Br.forEach(s),Xa=a(f,`(logSuccess, logError)
		.`),ue=o(f,"SPAN",{class:!0});var qr=n(ue);Ya=a(qr,"then"),qr.forEach(s),es=a(f,`(callback)
})`),f.forEach(s),Ar.forEach(s),jr.forEach(s),Sr.forEach(s),Tt=m(l),y=o(l,"OL",{});var O=n(y);at=o(O,"LI",{});var Zr=n(at);ts=a(Zr,"Fetch the labels through Vision API"),Zr.forEach(s),as=m(O),st=o(O,"LI",{});var zr=n(st);ss=a(zr,"If any of the labels match a cat"),zr.forEach(s),ls=m(O),lt=o(O,"LI",{});var Kr=n(lt);rs=a(Kr,"Send a notification to the Slack through an incoming webhook"),Kr.forEach(s),os=m(O),rt=o(O,"LI",{});var Qr=n(rt);ns=a(Qr,"If all succeeded, log that. Otherwise log if there was an error."),Qr.forEach(s),is=m(O),ot=o(O,"LI",{});var Xr=n(ot);cs=a(Xr,"Finally, call the provided callback."),Xr.forEach(s),O.forEach(s),Dt=m(l),L=o(l,"P",{});var wr=n(L);hs=a(wr,"The code can be found on "),G=o(wr,"A",{href:!0,rel:!0});var Yr=n(G);ps=a(Yr,"Github"),Yr.forEach(s),wr.forEach(s),Ft=m(l),ve=o(l,"H2",{});var eo=n(ve);fs=a(eo,"Railway Oriented Programming (ROP)"),eo.forEach(s),xt=m(l),D=o(l,"P",{});var ea=n(D);ds=a(ea,"The inspiration for this implementation was taken from an excellent talk by Scott Wlaschin about "),V=o(ea,"A",{href:!0,rel:!0});var to=n(V);us=a(to,"Railway Oriented Programming"),to.forEach(s),vs=a(ea,". For a more in-depth description of ROP, I can highly recommend watching the talk and slides. The examples are in F# but shouldn’t be a problem to follow even if you are new to the language."),ea.forEach(s),Rt=m(l),j=o(l,"P",{});var Xe=n(j);ms=a(Xe,"In short, the idea is to describe the happy path through a process as the main "),nt=o(Xe,"EM",{});var ao=n(nt);Es=a(ao,"track"),ao.forEach(s),_s=a(Xe," and if an error occurs, the flow is shifted over to a secondary "),it=o(Xe,"EM",{});var so=n(it);ws=a(so,"error track"),so.forEach(s),ys=a(Xe,". Once on the error track, the flow will stay there until delt with. This could either be by logging an error or by handling the error and shifting the flow back onto the main track."),Xe.forEach(s),Ht=m(l),me=o(l,"P",{});var lo=n(me);gs=a(lo,"To better illustrate what this means for the code above, here it is described as the two tracks."),lo.forEach(s),Jt=m(l),F=o(l,"P",{});var ta=n(F);Ee=o(ta,"IMG",{src:!0,alt:!0}),ks=m(ta),ct=o(ta,"EM",{});var ro=n(ct);bs=a(ro,"(Graphics comes from Scotts presentation)."),ro.forEach(s),ta.forEach(s),Lt=m(l),w=o(l,"P",{});var b=n(w);Ps=a(b,"The flow starts on the green (above) track and any of "),ht=o(b,"CODE",{});var oo=n(ht);Ss=a(oo,"visionFetchLabels"),oo.forEach(s),js=a(b,", "),pt=o(b,"CODE",{});var no=n(pt);As=a(no,"any(isCat)"),no.forEach(s),Ns=a(b," and "),ft=o(b,"CODE",{});var io=n(ft);Os=a(io,"notifySlack"),io.forEach(s),Is=a(b," can shift the flow over to the red (below) track. At the end, the "),dt=o(b,"CODE",{});var co=n(dt);Cs=a(co,"logSuccess"),co.forEach(s),Ts=a(b," function is called in the green track and "),ut=o(b,"CODE",{});var ho=n(ut);Ds=a(ho,"logError"),ho.forEach(s),Fs=a(b," is called on the red track. After that, the tracks are again merged and "),vt=o(b,"CODE",{});var po=n(vt);xs=a(po,"callback"),po.forEach(s),Rs=a(b," is called."),b.forEach(s),Gt=m(l),_e=o(l,"H2",{});var fo=n(_e);Hs=a(fo,"ROP with Javascript promises"),fo.forEach(s),Vt=m(l),A=o(l,"P",{});var Ye=n(A);Js=a(Ye,"Javascript promises lends themselves very well to this style of programming where a "),mt=o(Ye,"CODE",{});var uo=n(mt);Ls=a(uo,"resolve"),uo.forEach(s),Gs=a(Ye," keeps the flow on the happy track and a "),Et=o(Ye,"CODE",{});var vo=n(Et);Vs=a(vo,"reject"),vo.forEach(s),$s=a(Ye," shifts flow to the error track."),Ye.forEach(s),$t=m(l),g=o(l,"P",{});var I=n(g);Ms=a(I,"This can best be seen in the implementation of "),_t=o(I,"CODE",{});var mo=n(_t);Us=a(mo,"any"),mo.forEach(s),Ws=a(I,". It’s a function that takes a "),wt=o(I,"CODE",{});var Eo=n(wt);Bs=a(Eo,"predicate"),Eo.forEach(s),qs=a(I," and returns a new function expecting an array of items. If the predicate is true for any of the items, a "),yt=o(I,"EM",{});var _o=n(yt);Zs=a(_o,"resolved"),_o.forEach(s),zs=a(I," promise is returned (stay on the happy track), otherwise a "),gt=o(I,"EM",{});var wo=n(gt);Ks=a(wo,"rejected"),wo.forEach(s),Qs=a(I," promise is returned (move to error track)."),I.forEach(s),Mt=m(l),$=o(l,"DIV",{class:!0});var yo=n($);we=o(yo,"DIV",{class:!0});var go=n(we);ye=o(go,"PRE",{class:!0});var ko=n(ye);u=o(ko,"CODE",{});var _=n(u);ge=o(_,"SPAN",{class:!0});var bo=n(ge);Xs=a(bo,"function"),bo.forEach(s),Ys=a(_," "),ke=o(_,"SPAN",{class:!0});var Po=n(ke);el=a(Po,"any"),Po.forEach(s),tl=a(_,"("),be=o(_,"SPAN",{class:!0});var So=n(be);al=a(So,"predicate"),So.forEach(s),sl=a(_,`) {
	`),Pe=o(_,"SPAN",{class:!0});var jo=n(Pe);ll=a(jo,"return"),jo.forEach(s),rl=a(_," "),Se=o(_,"SPAN",{class:!0});var Ao=n(Se);ol=a(Ao,"function"),Ao.forEach(s),nl=a(_," ("),je=o(_,"SPAN",{class:!0});var No=n(je);il=a(No,"items"),No.forEach(s),cl=a(_,`) {
		`),Ae=o(_,"SPAN",{class:!0});var Oo=n(Ae);hl=a(Oo,"return"),Oo.forEach(s),pl=a(_," items."),Ne=o(_,"SPAN",{class:!0});var Io=n(Ne);fl=a(Io,"find"),Io.forEach(s),dl=a(_,"(predicate) ? "),Oe=o(_,"SPAN",{class:!0});var Co=n(Oe);ul=a(Co,"Promise"),Co.forEach(s),vl=a(_,"."),Ie=o(_,"SPAN",{class:!0});var To=n(Ie);ml=a(To,"resolve"),To.forEach(s),El=a(_,"(items) : "),Ce=o(_,"SPAN",{class:!0});var Do=n(Ce);_l=a(Do,"Promise"),Do.forEach(s),wl=a(_,"."),Te=o(_,"SPAN",{class:!0});var Fo=n(Te);yl=a(Fo,"reject"),Fo.forEach(s),gl=a(_,`()
	}
}`),_.forEach(s),ko.forEach(s),go.forEach(s),yo.forEach(s),Ut=m(l),x=o(l,"P",{});var aa=n(x);kl=a(aa,"The image not containing a cat isn’t really an error, which is why no error is passed in the rejection. The "),kt=o(aa,"CODE",{});var xo=n(kt);bl=a(xo,"logError"),xo.forEach(s),Pl=a(aa," function checks if it gets an error and logs it if it does, otherwise does nothing."),aa.forEach(s),Wt=m(l),M=o(l,"DIV",{class:!0});var Ro=n(M);De=o(Ro,"DIV",{class:!0});var Ho=n(De);Fe=o(Ho,"PRE",{class:!0});var Jo=n(Fe);d=o(Jo,"CODE",{});var E=n(d);xe=o(E,"SPAN",{class:!0});var Lo=n(xe);Sl=a(Lo,"function"),Lo.forEach(s),jl=a(E," "),Re=o(E,"SPAN",{class:!0});var Go=n(Re);Al=a(Go,"logSuccess"),Go.forEach(s),Nl=a(E,"("),bt=o(E,"SPAN",{class:!0}),n(bt).forEach(s),Ol=a(E,`) {
	`),He=o(E,"SPAN",{class:!0});var Vo=n(He);Il=a(Vo,"console"),Vo.forEach(s),Cl=a(E,"."),Je=o(E,"SPAN",{class:!0});var $o=n(Je);Tl=a($o,"log"),$o.forEach(s),Dl=a(E,"("),Le=o(E,"SPAN",{class:!0});var Mo=n(Le);Fl=a(Mo,"`Successfully sent a cat to slack`"),Mo.forEach(s),xl=a(E,`)
}

`),Ge=o(E,"SPAN",{class:!0});var Uo=n(Ge);Rl=a(Uo,"function"),Uo.forEach(s),Hl=a(E," "),Ve=o(E,"SPAN",{class:!0});var Wo=n(Ve);Jl=a(Wo,"logError"),Wo.forEach(s),Ll=a(E,"("),$e=o(E,"SPAN",{class:!0});var Bo=n($e);Gl=a(Bo,"error"),Bo.forEach(s),Vl=a(E,`) {
	`),Me=o(E,"SPAN",{class:!0});var qo=n(Me);$l=a(qo,"if"),qo.forEach(s),Ml=a(E,` (error) {
		`),Ue=o(E,"SPAN",{class:!0});var Zo=n(Ue);Ul=a(Zo,"console"),Zo.forEach(s),Wl=a(E,"."),We=o(E,"SPAN",{class:!0});var zo=n(We);Bl=a(zo,"error"),zo.forEach(s),ql=a(E,"("),R=o(E,"SPAN",{class:!0});var sa=n(R);Zl=a(sa,"`Function failed with: "),Be=o(sa,"SPAN",{class:!0});var Ko=n(Be);zl=a(Ko,"${error.message}"),Ko.forEach(s),Kl=a(sa,"`"),sa.forEach(s),Ql=a(E,`)
	}
}`),E.forEach(s),Jo.forEach(s),Ho.forEach(s),Ro.forEach(s),Bt=m(l),k=o(l,"P",{});var C=n(k);Xl=a(C,"Finally, as neither "),Pt=o(C,"CODE",{});var Qo=n(Pt);Yl=a(Qo,"logSuccess"),Qo.forEach(s),er=a(C," or "),St=o(C,"CODE",{});var Xo=n(St);tr=a(Xo,"logError"),Xo.forEach(s),ar=a(C," returns a rejection, they will both be wrapped in a "),jt=o(C,"CODE",{});var Yo=n(jt);sr=a(Yo,"resolve"),Yo.forEach(s),lr=a(C," and are both on the happy track again for finally calling "),At=o(C,"CODE",{});var en=n(At);rr=a(en,"callback"),en.forEach(s),or=a(C,"."),C.forEach(s),qt=m(l),qe=o(l,"H2",{});var tn=n(qe);nr=a(tn,"Higher order functions and ROP"),tn.forEach(s),Zt=m(l),N=o(l,"P",{});var et=n(N);ir=a(et,"Both "),Nt=o(et,"CODE",{});var an=n(Nt);cr=a(an,"any"),an.forEach(s),hr=a(et," and "),Ot=o(et,"CODE",{});var sn=n(Ot);pr=a(sn,"notifySlack"),sn.forEach(s),fr=a(et," are higher order functions (returns new functions). The reason for this is that the flow through the happy track only allows for passing one value on to the next function."),et.forEach(s),zt=m(l),Ze=o(l,"P",{});var ln=n(Ze);dr=a(ln,"This is a very common scenario but might take some getting used to if you are comming from an OOP background, I know it did for me at least."),ln.forEach(s),Kt=m(l),ze=o(l,"H2",{});var rn=n(ze);ur=a(rn,"Extra nice in Javascript"),rn.forEach(s),Qt=m(l),H=o(l,"P",{});var la=n(H);vr=a(la,"This style of programming would work in any language with support for an "),U=o(la,"A",{href:!0,rel:!0});var on=n(U);mr=a(on,"Either type"),on.forEach(s),Er=a(la," and higher order functions."),la.forEach(s),Xt=m(l),Ke=o(l,"P",{});var nn=n(Ke);_r=a(nn,"However, with promises you get an extra level of power since asynchronous operations can be modelled as well. With Javascript including promises out of the box, Node.js and third party frameworks all have great support for them and this style of programming can be a great option for a wide array of applications."),nn.forEach(s),this.h()},h(){i(W,"href","/blog/building-interactions-with-gcf"),i(z,"class","hljs-built_in"),i(K,"class","hljs-property"),i(Q,"class","hljs-title function_"),i(X,"class","hljs-keyword"),i(Y,"class","hljs-params"),i(ee,"class","hljs-keyword"),i(te,"class","hljs-property"),i(ae,"class","hljs-keyword"),i(se,"class","hljs-subst"),i(le,"class","hljs-subst"),i(S,"class","hljs-string"),i(re,"class","hljs-keyword"),i(oe,"class","hljs-title function_"),i(ne,"class","hljs-title function_"),i(ie,"class","hljs-title function_"),i(ce,"class","hljs-title function_"),i(he,"class","hljs-title function_"),i(pe,"class","hljs-property"),i(fe,"class","hljs-subst"),i(T,"class","hljs-string"),i(de,"class","hljs-title function_"),i(ue,"class","hljs-title function_"),i(Z,"class","highlight"),i(q,"class","highlight"),i(J,"class","highlighter-rouge language-javascript"),i(G,"href","https://github.com/hallski/cat-finder"),i(G,"rel","nofollow"),i(V,"href","http://fsharpforfunandprofit.com/rop/"),i(V,"rel","nofollow"),dn(Ee.src,gr="/images/posts/rop-catfinder.png")||i(Ee,"src",gr),i(Ee,"alt","Resulting App"),i(ge,"class","hljs-keyword"),i(ke,"class","hljs-title function_"),i(be,"class","hljs-params"),i(Pe,"class","hljs-keyword"),i(Se,"class","hljs-keyword"),i(je,"class","hljs-params"),i(Ae,"class","hljs-keyword"),i(Ne,"class","hljs-title function_"),i(Oe,"class","hljs-title class_"),i(Ie,"class","hljs-title function_"),i(Ce,"class","hljs-title class_"),i(Te,"class","hljs-title function_"),i(ye,"class","highlight"),i(we,"class","highlight"),i($,"class","highlighter-rouge language-javascript"),i(xe,"class","hljs-keyword"),i(Re,"class","hljs-title function_"),i(bt,"class","hljs-params"),i(He,"class","hljs-variable language_"),i(Je,"class","hljs-title function_"),i(Le,"class","hljs-string"),i(Ge,"class","hljs-keyword"),i(Ve,"class","hljs-title function_"),i($e,"class","hljs-params"),i(Me,"class","hljs-keyword"),i(Ue,"class","hljs-variable language_"),i(We,"class","hljs-title function_"),i(Be,"class","hljs-subst"),i(R,"class","hljs-string"),i(Fe,"class","highlight"),i(De,"class","highlight"),i(M,"class","highlighter-rouge language-javascript"),i(U,"href","https://www.schoolofhaskell.com/school/starting-with-haskell/basics-of-haskell/10_Error_Handling#the-either-monad"),i(U,"rel","nofollow")},m(l,c){h(l,P,c),e(P,ra),e(P,W),e(W,oa),e(P,na),e(P,tt),e(tt,ia),e(P,ca),h(l,It,c),h(l,B,c),e(B,ha),h(l,Ct,c),h(l,J,c),e(J,q),e(q,Z),e(Z,p),e(p,z),e(z,pa),e(p,fa),e(p,K),e(K,da),e(p,ua),e(p,Q),e(Q,va),e(p,ma),e(p,X),e(X,Ea),e(p,_a),e(p,Y),e(Y,wa),e(p,ya),e(p,ee),e(ee,ga),e(p,ka),e(p,te),e(te,ba),e(p,Pa),e(p,ae),e(ae,Sa),e(p,ja),e(p,S),e(S,Aa),e(S,se),e(se,Na),e(S,Oa),e(S,le),e(le,Ia),e(S,Ca),e(p,Ta),e(p,re),e(re,Da),e(p,Fa),e(p,oe),e(oe,xa),e(p,Ra),e(p,ne),e(ne,Ha),e(p,Ja),e(p,ie),e(ie,La),e(p,Ga),e(p,ce),e(ce,Va),e(p,$a),e(p,he),e(he,Ma),e(p,Ua),e(p,pe),e(pe,Wa),e(p,Ba),e(p,T),e(T,qa),e(T,fe),e(fe,Za),e(T,za),e(p,Ka),e(p,de),e(de,Qa),e(p,Xa),e(p,ue),e(ue,Ya),e(p,es),h(l,Tt,c),h(l,y,c),e(y,at),e(at,ts),e(y,as),e(y,st),e(st,ss),e(y,ls),e(y,lt),e(lt,rs),e(y,os),e(y,rt),e(rt,ns),e(y,is),e(y,ot),e(ot,cs),h(l,Dt,c),h(l,L,c),e(L,hs),e(L,G),e(G,ps),h(l,Ft,c),h(l,ve,c),e(ve,fs),h(l,xt,c),h(l,D,c),e(D,ds),e(D,V),e(V,us),e(D,vs),h(l,Rt,c),h(l,j,c),e(j,ms),e(j,nt),e(nt,Es),e(j,_s),e(j,it),e(it,ws),e(j,ys),h(l,Ht,c),h(l,me,c),e(me,gs),h(l,Jt,c),h(l,F,c),e(F,Ee),e(F,ks),e(F,ct),e(ct,bs),h(l,Lt,c),h(l,w,c),e(w,Ps),e(w,ht),e(ht,Ss),e(w,js),e(w,pt),e(pt,As),e(w,Ns),e(w,ft),e(ft,Os),e(w,Is),e(w,dt),e(dt,Cs),e(w,Ts),e(w,ut),e(ut,Ds),e(w,Fs),e(w,vt),e(vt,xs),e(w,Rs),h(l,Gt,c),h(l,_e,c),e(_e,Hs),h(l,Vt,c),h(l,A,c),e(A,Js),e(A,mt),e(mt,Ls),e(A,Gs),e(A,Et),e(Et,Vs),e(A,$s),h(l,$t,c),h(l,g,c),e(g,Ms),e(g,_t),e(_t,Us),e(g,Ws),e(g,wt),e(wt,Bs),e(g,qs),e(g,yt),e(yt,Zs),e(g,zs),e(g,gt),e(gt,Ks),e(g,Qs),h(l,Mt,c),h(l,$,c),e($,we),e(we,ye),e(ye,u),e(u,ge),e(ge,Xs),e(u,Ys),e(u,ke),e(ke,el),e(u,tl),e(u,be),e(be,al),e(u,sl),e(u,Pe),e(Pe,ll),e(u,rl),e(u,Se),e(Se,ol),e(u,nl),e(u,je),e(je,il),e(u,cl),e(u,Ae),e(Ae,hl),e(u,pl),e(u,Ne),e(Ne,fl),e(u,dl),e(u,Oe),e(Oe,ul),e(u,vl),e(u,Ie),e(Ie,ml),e(u,El),e(u,Ce),e(Ce,_l),e(u,wl),e(u,Te),e(Te,yl),e(u,gl),h(l,Ut,c),h(l,x,c),e(x,kl),e(x,kt),e(kt,bl),e(x,Pl),h(l,Wt,c),h(l,M,c),e(M,De),e(De,Fe),e(Fe,d),e(d,xe),e(xe,Sl),e(d,jl),e(d,Re),e(Re,Al),e(d,Nl),e(d,bt),e(d,Ol),e(d,He),e(He,Il),e(d,Cl),e(d,Je),e(Je,Tl),e(d,Dl),e(d,Le),e(Le,Fl),e(d,xl),e(d,Ge),e(Ge,Rl),e(d,Hl),e(d,Ve),e(Ve,Jl),e(d,Ll),e(d,$e),e($e,Gl),e(d,Vl),e(d,Me),e(Me,$l),e(d,Ml),e(d,Ue),e(Ue,Ul),e(d,Wl),e(d,We),e(We,Bl),e(d,ql),e(d,R),e(R,Zl),e(R,Be),e(Be,zl),e(R,Kl),e(d,Ql),h(l,Bt,c),h(l,k,c),e(k,Xl),e(k,Pt),e(Pt,Yl),e(k,er),e(k,St),e(St,tr),e(k,ar),e(k,jt),e(jt,sr),e(k,lr),e(k,At),e(At,rr),e(k,or),h(l,qt,c),h(l,qe,c),e(qe,nr),h(l,Zt,c),h(l,N,c),e(N,ir),e(N,Nt),e(Nt,cr),e(N,hr),e(N,Ot),e(Ot,pr),e(N,fr),h(l,zt,c),h(l,Ze,c),e(Ze,dr),h(l,Kt,c),h(l,ze,c),e(ze,ur),h(l,Qt,c),h(l,H,c),e(H,vr),e(H,U),e(U,mr),e(H,Er),h(l,Xt,c),h(l,Ke,c),e(Ke,_r)},p:yr,i:yr,o:yr,d(l){l&&s(P),l&&s(It),l&&s(B),l&&s(Ct),l&&s(J),l&&s(Tt),l&&s(y),l&&s(Dt),l&&s(L),l&&s(Ft),l&&s(ve),l&&s(xt),l&&s(D),l&&s(Rt),l&&s(j),l&&s(Ht),l&&s(me),l&&s(Jt),l&&s(F),l&&s(Lt),l&&s(w),l&&s(Gt),l&&s(_e),l&&s(Vt),l&&s(A),l&&s($t),l&&s(g),l&&s(Mt),l&&s($),l&&s(Ut),l&&s(x),l&&s(Wt),l&&s(M),l&&s(Bt),l&&s(k),l&&s(qt),l&&s(qe),l&&s(Zt),l&&s(N),l&&s(zt),l&&s(Ze),l&&s(Kt),l&&s(ze),l&&s(Qt),l&&s(H),l&&s(Xt),l&&s(Ke)}}}const mn={comments:!0,date:"2017-11-06T00:00:00Z",excerpt:null,section:"blog",tags:["javascript","promises","rop"],title:"Railway oriented programming with Promises"};class En extends hn{constructor(P){super(),pn(this,P,null,un,fn,{})}}export{En as default,mn as metadata};
