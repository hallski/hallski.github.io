import{S as os,i as rs,s as ns,k as o,q as a,a as u,l as r,m as n,r as l,h as s,c as E,n as d,b as p,D as e,B as bt}from"./index-57d6417f.js";function is(ls){let w,be,ie,v,Ae,A,De,Pe,D,Oe,xe,de,_,Ce,Q,Ie,Ne,pe,I,Te,ce,N,Ge,he,f,Me,Y,je,He,ee,Ke,Fe,te,Re,Ve,fe,P,T,G,se,$e,ue,y,We,ae,qe,ze,le,Le,Ue,Ee,O,M,j,x,H,Xe,Be,g,Ze,K,Je,Qe,ve,m,Ye,oe,et,tt,re,st,at,ye,C,F,R,c,V,lt,ot,S,rt,$,nt,it,dt,W,pt,ct,q,ht,ft,z,ut,Et,L,vt,yt,U,mt,wt,X,_t,me,k,gt,ne,St,kt;return{c(){w=o("h2"),be=a("Running Sway on Fedora 31 with GDM"),ie=u(),v=o("p"),Ae=a("After upgrading to Fedora 31 a crucial extension "),A=o("a"),De=a("Slinger"),Pe=a(", stopped working. Luckily the "),D=o("a"),Oe=a("Sway"),xe=a(" package had been updated to 1.1 so figured I’d try it out."),de=u(),_=o("p"),Ce=a("In summary it’s been working really well however in order to use the GNOME Keyring Daemon as SSH Agent I needed to pass an environment variable to the Sway process. Turns out something changed in how Wayland sessions (compared to X) were started and the old "),Q=o("code"),Ie=a("~/.profile"),Ne=a(" solution didn’t work any longer."),pe=u(),I=o("p"),Te=a("After some Googling I found out that the gnome-shell came with a workaround for this where it runs a custom script before actually starting the shell."),ce=u(),N=o("p"),Ge=a("Copying that setup here is what I did in order to get it to work."),he=u(),f=o("p"),Me=a("Make a copy of "),Y=o("code"),je=a("sway.desktop"),He=a(" in "),ee=o("code"),Ke=a("/usr/share/wayland-sessions"),Fe=a(" to "),te=o("code"),Re=a("sway-shell.desktop"),Ve=a(" and make sure it has the same mods."),fe=u(),P=o("div"),T=o("div"),G=o("pre"),se=o("code"),$e=a(`[Desktop Entry]
Name=Sway Shell
Comment=An i3-compatible Wayland compositor
Exec=/usr/bin/sway-shell
TryExec=/usr/bin/sway-shell
Type=Application`),ue=u(),y=o("p"),We=a("Copy "),ae=o("code"),qe=a("/usr/bin/gnome-session"),ze=a(" to "),le=o("code"),Le=a("/usr/bin/sway-shell"),Ue=a(" and replace the last like with"),Ee=u(),O=o("div"),M=o("div"),j=o("pre"),x=o("code"),H=o("span"),Xe=a("exec"),Be=a(" /usr/bin/sway "),g=o("span"),Ze=a('"'),K=o("span"),Je=a("$@"),Qe=a('"'),ve=u(),m=o("p"),Ye=a("Edit "),oe=o("code"),et=a("~/.profile"),tt=a(" (or in my case "),re=o("code"),st=a("~/.zprofile"),at=a(") to setup the environment."),ye=u(),C=o("div"),F=o("div"),R=o("pre"),c=o("code"),V=o("span"),lt=a("if"),ot=a(" [ -n "),S=o("span"),rt=a('"'),$=o("span"),nt=a("$DESKTOP_SESSION"),it=a('"'),dt=a(" ];"),W=o("span"),pt=a("then"),ct=a(`
  `),q=o("span"),ht=a("eval"),ft=a(` $(gnome-keyring-daemon --start --components=ssh)
  `),z=o("span"),ut=a("export"),Et=a(` SSH_AUTH_SOCK
  `),L=o("span"),vt=a("export"),yt=a(" GTK_THEME="),U=o("span"),mt=a('"Adwaita-dark"'),wt=a(`
`),X=o("span"),_t=a("fi"),me=u(),k=o("p"),gt=a("After that I simply logged out, changed to use "),ne=o("strong"),St=a("Sway Shell"),kt=a(" in GDM and logged back in."),this.h()},l(t){w=r(t,"H2",{});var i=n(w);be=l(i,"Running Sway on Fedora 31 with GDM"),i.forEach(s),ie=E(t),v=r(t,"P",{});var B=n(v);Ae=l(B,"After upgrading to Fedora 31 a crucial extension "),A=r(B,"A",{href:!0,rel:!0});var At=n(A);De=l(At,"Slinger"),At.forEach(s),Pe=l(B,", stopped working. Luckily the "),D=r(B,"A",{href:!0,rel:!0});var Dt=n(D);Oe=l(Dt,"Sway"),Dt.forEach(s),xe=l(B," package had been updated to 1.1 so figured I’d try it out."),B.forEach(s),de=E(t),_=r(t,"P",{});var we=n(_);Ce=l(we,"In summary it’s been working really well however in order to use the GNOME Keyring Daemon as SSH Agent I needed to pass an environment variable to the Sway process. Turns out something changed in how Wayland sessions (compared to X) were started and the old "),Q=r(we,"CODE",{});var Pt=n(Q);Ie=l(Pt,"~/.profile"),Pt.forEach(s),Ne=l(we," solution didn’t work any longer."),we.forEach(s),pe=E(t),I=r(t,"P",{});var Ot=n(I);Te=l(Ot,"After some Googling I found out that the gnome-shell came with a workaround for this where it runs a custom script before actually starting the shell."),Ot.forEach(s),ce=E(t),N=r(t,"P",{});var xt=n(N);Ge=l(xt,"Copying that setup here is what I did in order to get it to work."),xt.forEach(s),he=E(t),f=r(t,"P",{});var b=n(f);Me=l(b,"Make a copy of "),Y=r(b,"CODE",{});var Ct=n(Y);je=l(Ct,"sway.desktop"),Ct.forEach(s),He=l(b," in "),ee=r(b,"CODE",{});var It=n(ee);Ke=l(It,"/usr/share/wayland-sessions"),It.forEach(s),Fe=l(b," to "),te=r(b,"CODE",{});var Nt=n(te);Re=l(Nt,"sway-shell.desktop"),Nt.forEach(s),Ve=l(b," and make sure it has the same mods."),b.forEach(s),fe=E(t),P=r(t,"DIV",{class:!0});var Tt=n(P);T=r(Tt,"DIV",{class:!0});var Gt=n(T);G=r(Gt,"PRE",{class:!0});var Mt=n(G);se=r(Mt,"CODE",{});var jt=n(se);$e=l(jt,`[Desktop Entry]
Name=Sway Shell
Comment=An i3-compatible Wayland compositor
Exec=/usr/bin/sway-shell
TryExec=/usr/bin/sway-shell
Type=Application`),jt.forEach(s),Mt.forEach(s),Gt.forEach(s),Tt.forEach(s),ue=E(t),y=r(t,"P",{});var Z=n(y);We=l(Z,"Copy "),ae=r(Z,"CODE",{});var Ht=n(ae);qe=l(Ht,"/usr/bin/gnome-session"),Ht.forEach(s),ze=l(Z," to "),le=r(Z,"CODE",{});var Kt=n(le);Le=l(Kt,"/usr/bin/sway-shell"),Kt.forEach(s),Ue=l(Z," and replace the last like with"),Z.forEach(s),Ee=E(t),O=r(t,"DIV",{class:!0});var Ft=n(O);M=r(Ft,"DIV",{class:!0});var Rt=n(M);j=r(Rt,"PRE",{class:!0});var Vt=n(j);x=r(Vt,"CODE",{});var _e=n(x);H=r(_e,"SPAN",{class:!0});var $t=n(H);Xe=l($t,"exec"),$t.forEach(s),Be=l(_e," /usr/bin/sway "),g=r(_e,"SPAN",{class:!0});var ge=n(g);Ze=l(ge,'"'),K=r(ge,"SPAN",{class:!0});var Wt=n(K);Je=l(Wt,"$@"),Wt.forEach(s),Qe=l(ge,'"'),ge.forEach(s),_e.forEach(s),Vt.forEach(s),Rt.forEach(s),Ft.forEach(s),ve=E(t),m=r(t,"P",{});var J=n(m);Ye=l(J,"Edit "),oe=r(J,"CODE",{});var qt=n(oe);et=l(qt,"~/.profile"),qt.forEach(s),tt=l(J," (or in my case "),re=r(J,"CODE",{});var zt=n(re);st=l(zt,"~/.zprofile"),zt.forEach(s),at=l(J,") to setup the environment."),J.forEach(s),ye=E(t),C=r(t,"DIV",{class:!0});var Lt=n(C);F=r(Lt,"DIV",{class:!0});var Ut=n(F);R=r(Ut,"PRE",{class:!0});var Xt=n(R);c=r(Xt,"CODE",{});var h=n(c);V=r(h,"SPAN",{class:!0});var Bt=n(V);lt=l(Bt,"if"),Bt.forEach(s),ot=l(h," [ -n "),S=r(h,"SPAN",{class:!0});var Se=n(S);rt=l(Se,'"'),$=r(Se,"SPAN",{class:!0});var Zt=n($);nt=l(Zt,"$DESKTOP_SESSION"),Zt.forEach(s),it=l(Se,'"'),Se.forEach(s),dt=l(h," ];"),W=r(h,"SPAN",{class:!0});var Jt=n(W);pt=l(Jt,"then"),Jt.forEach(s),ct=l(h,`
  `),q=r(h,"SPAN",{class:!0});var Qt=n(q);ht=l(Qt,"eval"),Qt.forEach(s),ft=l(h,` $(gnome-keyring-daemon --start --components=ssh)
  `),z=r(h,"SPAN",{class:!0});var Yt=n(z);ut=l(Yt,"export"),Yt.forEach(s),Et=l(h,` SSH_AUTH_SOCK
  `),L=r(h,"SPAN",{class:!0});var es=n(L);vt=l(es,"export"),es.forEach(s),yt=l(h," GTK_THEME="),U=r(h,"SPAN",{class:!0});var ts=n(U);mt=l(ts,'"Adwaita-dark"'),ts.forEach(s),wt=l(h,`
`),X=r(h,"SPAN",{class:!0});var ss=n(X);_t=l(ss,"fi"),ss.forEach(s),h.forEach(s),Xt.forEach(s),Ut.forEach(s),Lt.forEach(s),me=E(t),k=r(t,"P",{});var ke=n(k);gt=l(ke,"After that I simply logged out, changed to use "),ne=r(ke,"STRONG",{});var as=n(ne);St=l(as,"Sway Shell"),as.forEach(s),kt=l(ke," in GDM and logged back in."),ke.forEach(s),this.h()},h(){d(A,"href","https://github.com/timbertson/slinger"),d(A,"rel","nofollow"),d(D,"href","https://swaywm.org/"),d(D,"rel","nofollow"),d(G,"class","highlight"),d(T,"class","highlight"),d(P,"class","highlighter-rouge language-text"),d(H,"class","hljs-built_in"),d(K,"class","hljs-variable"),d(g,"class","hljs-string"),d(j,"class","highlight"),d(M,"class","highlight"),d(O,"class","highlighter-rouge language-bash"),d(V,"class","hljs-keyword"),d($,"class","hljs-variable"),d(S,"class","hljs-string"),d(W,"class","hljs-keyword"),d(q,"class","hljs-built_in"),d(z,"class","hljs-built_in"),d(L,"class","hljs-built_in"),d(U,"class","hljs-string"),d(X,"class","hljs-keyword"),d(R,"class","highlight"),d(F,"class","highlight"),d(C,"class","highlighter-rouge language-bash")},m(t,i){p(t,w,i),e(w,be),p(t,ie,i),p(t,v,i),e(v,Ae),e(v,A),e(A,De),e(v,Pe),e(v,D),e(D,Oe),e(v,xe),p(t,de,i),p(t,_,i),e(_,Ce),e(_,Q),e(Q,Ie),e(_,Ne),p(t,pe,i),p(t,I,i),e(I,Te),p(t,ce,i),p(t,N,i),e(N,Ge),p(t,he,i),p(t,f,i),e(f,Me),e(f,Y),e(Y,je),e(f,He),e(f,ee),e(ee,Ke),e(f,Fe),e(f,te),e(te,Re),e(f,Ve),p(t,fe,i),p(t,P,i),e(P,T),e(T,G),e(G,se),e(se,$e),p(t,ue,i),p(t,y,i),e(y,We),e(y,ae),e(ae,qe),e(y,ze),e(y,le),e(le,Le),e(y,Ue),p(t,Ee,i),p(t,O,i),e(O,M),e(M,j),e(j,x),e(x,H),e(H,Xe),e(x,Be),e(x,g),e(g,Ze),e(g,K),e(K,Je),e(g,Qe),p(t,ve,i),p(t,m,i),e(m,Ye),e(m,oe),e(oe,et),e(m,tt),e(m,re),e(re,st),e(m,at),p(t,ye,i),p(t,C,i),e(C,F),e(F,R),e(R,c),e(c,V),e(V,lt),e(c,ot),e(c,S),e(S,rt),e(S,$),e($,nt),e(S,it),e(c,dt),e(c,W),e(W,pt),e(c,ct),e(c,q),e(q,ht),e(c,ft),e(c,z),e(z,ut),e(c,Et),e(c,L),e(L,vt),e(c,yt),e(c,U),e(U,mt),e(c,wt),e(c,X),e(X,_t),p(t,me,i),p(t,k,i),e(k,gt),e(k,ne),e(ne,St),e(k,kt)},p:bt,i:bt,o:bt,d(t){t&&s(w),t&&s(ie),t&&s(v),t&&s(de),t&&s(_),t&&s(pe),t&&s(I),t&&s(ce),t&&s(N),t&&s(he),t&&s(f),t&&s(fe),t&&s(P),t&&s(ue),t&&s(y),t&&s(Ee),t&&s(O),t&&s(ve),t&&s(m),t&&s(ye),t&&s(C),t&&s(me),t&&s(k)}}}const ps={date:"2019-11-04T00:00:00Z",excerpt:"Setting up Sway to work on Fedora 31 with GDM as desktop manager and gnome-keyring-daemon.",section:"blog",tags:["linux","sway","wayland","GNOME"],title:"Sway on Fedora 31 with GDM"};class cs extends os{constructor(w){super(),rs(this,w,null,is,ns,{})}}export{cs as default,ps as metadata};
