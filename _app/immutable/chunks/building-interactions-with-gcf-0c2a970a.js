import{S as Ep,i as mp,s as _p,k as n,q as t,a as f,l as o,m as r,r as s,h as a,c as d,n as i,b as h,D as e,B as ji}from"./index-57d6417f.js";function bp(vp){let G,xa,Ms,L,Va,ds,Ga,La,$s,re,Ha,Bs,j,qa,us,Ra,Wa,vs,Ua,Ma,Es,$a,Ba,zs,ie,za,Ys,ce,Ya,Zs,H,Za,K,Ja,Ka,Js,he,Qa,Ks,A,Xa,ms,el,tl,_s,sl,al,bs,ll,nl,Qs,N,ol,gs,rl,il,ys,cl,hl,ks,pl,fl,Xs,Q,pe,fe,C,de,dl,ul,ue,vl,El,ve,ml,_l,Ee,bl,gl,ea,D,yl,Ss,kl,Sl,ws,wl,Pl,ta,me,jl,sa,X,_e,be,p,ge,Al,Nl,ye,Cl,Il,ke,Fl,Dl,Se,Tl,Ol,we,xl,Vl,Pe,Gl,Ll,je,Hl,ql,Ae,Rl,Wl,Ne,Ul,Ml,Ce,$l,Bl,Ie,zl,Yl,Fe,Zl,Jl,De,Kl,Ql,Te,Xl,en,Oe,tn,sn,xe,an,ln,Ve,nn,on,Ge,rn,cn,Le,hn,pn,aa,I,fn,Ps,dn,un,js,vn,En,As,mn,_n,la,ee,He,qe,b,Re,bn,gn,We,yn,kn,Ue,Sn,wn,Me,Pn,jn,$e,An,Nn,Be,Cn,In,ze,Fn,Dn,Ye,Tn,On,Ze,xn,Vn,Je,Gn,Ln,na,q,Hn,Ns,qn,Rn,oa,te,Ke,Qe,v,Xe,Wn,Un,et,Mn,$n,tt,Bn,zn,T,Yn,st,Zn,Jn,at,Kn,Qn,Xn,lt,eo,to,nt,so,ao,ot,lo,no,rt,oo,ro,it,io,co,ct,ho,po,ht,fo,uo,R,vo,pt,Eo,mo,_o,ft,bo,go,dt,yo,ko,ra,P,Cs,So,wo,Is,Po,jo,Fs,Ao,No,Ds,Co,Io,Ts,Fo,ia,F,Do,Os,To,Oo,xs,xo,Vo,Vs,Go,Lo,ca,W,Ho,Gs,qo,Ro,ha,se,ut,vt,E,Et,Wo,Uo,mt,Mo,$o,_t,Bo,zo,bt,Yo,Zo,gt,Jo,Ko,yt,Qo,Xo,kt,er,tr,St,sr,ar,wt,lr,nr,Pt,or,rr,jt,ir,cr,At,hr,pr,Nt,fr,dr,Ct,ur,vr,pa,U,Er,Ls,mr,_r,fa,ae,It,Ft,g,Dt,br,gr,Tt,yr,kr,Ot,Sr,wr,xt,Pr,jr,Vt,Ar,Nr,Gt,Cr,Ir,Lt,Fr,Dr,Ht,Tr,Or,qt,xr,Vr,Rt,Gr,Lr,da,M,Hr,Hs,qr,Rr,ua,Wt,Wr,va,le,Ut,Mt,y,$t,Ur,Mr,Bt,$r,Br,zt,zr,Yr,Yt,Zr,Jr,Zt,Kr,Qr,qs,Xr,Jt,ei,ti,Kt,si,ai,Qt,li,ni,Xt,oi,ri,Ea,es,ii,ma,ts,ci,_a,ss,hi,ba,ne,as,ls,oe,pi,ns,fi,di,ga,O,ui,Rs,vi,Ei,Ws,mi,_i,ya,$,bi,Us,gi,yi,ka,os,ki,Sa,rs,Si,wa,is,wi,Pa,cs,Pi;return{c(){G=n("h2"),xa=t("Google Cloud Functions (GCF)"),Ms=f(),L=n("p"),Va=t("GCF is Googles version of AWS Lambda which provides a "),ds=n("em"),Ga=t("“server less”"),La=t(" (in the sense that as a developer you don’t need to care about anything other than your code) service to run code in the cloud. This type of service is often called Function as a Service, or FaaS for short."),$s=f(),re=n("p"),Ha=t("It’s a perfect solution for event triggered small integrations or transformations. Such as a webhook for callbacks from various services. As a developer you only have to implement the event handler and can ignore any OS or HTTP Server setup or administration. The cloud provider takes care of all of that as well as scaling if load increases."),Bs=f(),j=n("p"),qa=t("This of course comes with some constraints and in the case of Google Cloud Functions it means a function can be triggered by "),us=n("em"),Ra=t("HTTPS requests"),Wa=t(", "),vs=n("em"),Ua=t("Cloud Storage Events"),Ma=t(" or "),Es=n("em"),$a=t("Pub/Sub"),Ba=t(` and is (currently) limited
to Node.js v6.11.1.`),zs=f(),ie=n("h2"),za=t("The Catfinder function"),Ys=f(),ce=n("p"),Ya=t("As an example of setting up an integration as a function this post will use a small function that integrates Google Cloud Storage, Google Vision and Slack. It works by getting a change event from a Cloud Storage bucket and send any new files to the Vision API to decide whether it’s an image of a cat. If it is, it will send a message to Slack notifying that a new cat picture was uploaded."),Zs=f(),H=n("p"),Za=t("All the code for the project can be found at "),K=n("a"),Ja=t("Github"),Ka=t("."),Js=f(),he=n("h3"),Qa=t("Implementation"),Ks=f(),A=n("p"),Xa=t("A cloud function is a normal NPM module where the script pointed to by "),ms=n("code"),el=t("main"),tl=t(" in "),_s=n("code"),sl=t("package.json"),al=t(" needs to export a function with the same name as the function (by default, this can be overridden with the "),bs=n("code"),ll=t("--entry-point"),nl=t(" flag when deploying)."),Qs=f(),N=n("p"),ol=t("In our "),gs=n("code"),rl=t("package.json"),il=t(" the main module is defined to be "),ys=n("code"),cl=t("src/index.js"),hl=t(" and the exported function is called "),ks=n("code"),pl=t("catFinder"),fl=t(". The function has different signatures depending on the trigger mechanism. In the case of a bucket event it will have the signature:"),Xs=f(),Q=n("div"),pe=n("div"),fe=n("pre"),C=n("code"),de=n("span"),dl=t("exports"),ul=t("."),ue=n("span"),vl=t("catFinder"),El=t(" = "),ve=n("span"),ml=t("function"),_l=t(" ("),Ee=n("span"),bl=t("event, callback"),gl=t(") {}"),ea=f(),D=n("p"),yl=t("The "),Ss=n("code"),kl=t("event"),Sl=t(" contains information about the event, such as file name, bucket name, event type etc. The "),ws=n("code"),wl=t("callback"),Pl=t(" is used to notify that the function has finished."),ta=f(),me=n("p"),jl=t("The first thing we need to do is check that we care about the event, for this project only newly created files are interesting. In order to keep this logic out of the actual function implementation I’ve written a small helper that wraps the function and returns if the event doesn’t match the criteria."),sa=f(),X=n("div"),_e=n("div"),be=n("pre"),p=n("code"),ge=n("span"),Al=t("// From src/google-cloud.js"),Nl=t(`
`),ye=n("span"),Cl=t("function"),Il=t(" "),ke=n("span"),Fl=t("filteredEventHandler"),Dl=t("("),Se=n("span"),Tl=t("predicate, handler"),Ol=t(`) {
  `),we=n("span"),xl=t("return"),Vl=t(" "),Pe=n("span"),Gl=t("function"),Ll=t("("),je=n("span"),Hl=t("event, callback"),ql=t(`) {
    `),Ae=n("span"),Rl=t("if"),Wl=t(" ("),Ne=n("span"),Ul=t("predicate"),Ml=t(`(event)) {
      `),Ce=n("span"),$l=t("handler"),Bl=t(`(event, callback)
    } `),Ie=n("span"),zl=t("else"),Yl=t(` {
      `),Fe=n("span"),Zl=t("callback"),Jl=t(`()
    }
  }
}

`),De=n("span"),Kl=t("// In index.js"),Ql=t(`
`),Te=n("span"),Xl=t("exports"),en=t("."),Oe=n("span"),tn=t("catFinder"),sn=t(" = "),xe=n("span"),an=t("filteredEventHandler"),ln=t("(storageNewFileEventFilter, "),Ve=n("span"),nn=t("function"),on=t("("),Ge=n("span"),rn=t("event, callback"),cn=t(`) {
  `),Le=n("span"),hn=t("// ..."),pn=t(`
}`),aa=f(),I=n("p"),fn=t("The "),Ps=n("code"),dn=t("storageNewFileEventFilter"),un=t(" function takes in the event and checks whether it’s referring to a new file event. It checks that the resource still exists (otherwise it’s a delete event) and that the "),js=n("code"),vn=t("metageneration"),En=t(" is "),As=n("code"),mn=t("1"),_n=t(", otherwise it’s an update event."),la=f(),ee=n("div"),He=n("div"),qe=n("pre"),b=n("code"),Re=n("span"),bn=t("function"),gn=t(" "),We=n("span"),yn=t("storageNewFileEventFilter"),kn=t("("),Ue=n("span"),Sn=t("event"),wn=t(`) {
	`),Me=n("span"),Pn=t("const"),jn=t(" file = event."),$e=n("span"),An=t("data"),Nn=t(`
	`),Be=n("span"),Cn=t("return"),In=t(" file."),ze=n("span"),Fn=t("resourceState"),Dn=t(" === "),Ye=n("span"),Tn=t("'exists'"),On=t(" && file."),Ze=n("span"),xn=t("metageneration"),Vn=t(" === "),Je=n("span"),Gn=t("'1'"),Ln=t(`
}`),na=f(),q=n("p"),Hn=t("With the help of "),Ns=n("em"),qn=t("Promises"),Rn=t(" the rest of the event handler function is very straight forward."),oa=f(),te=n("div"),Ke=n("div"),Qe=n("pre"),v=n("code"),Xe=n("span"),Wn=t("const"),Un=t(" file = event."),et=n("span"),Mn=t("data"),$n=t(`
`),tt=n("span"),Bn=t("const"),zn=t(" storageUri = "),T=n("span"),Yn=t("`gs://"),st=n("span"),Zn=t("${file.bucket}"),Jn=t("/"),at=n("span"),Kn=t("${file.name}"),Qn=t("`"),Xn=t(`

`),lt=n("span"),eo=t("return"),to=t(" "),nt=n("span"),so=t("visionFetchLabels"),ao=t(`(storageUri)
	.`),ot=n("span"),lo=t("then"),no=t("("),rt=n("span"),oo=t("any"),ro=t(`(isCat))
	.`),it=n("span"),io=t("then"),co=t("("),ct=n("span"),ho=t("notifySlack"),po=t("(secrets."),ht=n("span"),fo=t("slackWebhook"),uo=t(", "),R=n("span"),vo=t("`A cat was posted: "),pt=n("span"),Eo=t("${storageUri}"),mo=t("`"),_o=t(`))
	.`),ft=n("span"),bo=t("then"),go=t(`(logSuccess, logError)
	.`),dt=n("span"),yo=t("then"),ko=t("(callback)"),ra=f(),P=n("ol"),Cs=n("li"),So=t("Fetch the labels through Vision API"),wo=f(),Is=n("li"),Po=t("If any of the labels match a cat"),jo=f(),Fs=n("li"),Ao=t("Send a notification to the Slack through an incoming webhook"),No=f(),Ds=n("li"),Co=t("If all succeeded, log that. Otherwise log if there was an error."),Io=f(),Ts=n("li"),Fo=t("Finally, call the provided callback."),ia=f(),F=n("p"),Do=t("We’ll focus on the "),Os=n("code"),To=t("visionFetchLabels"),Oo=t(", "),xs=n("code"),xo=t("isCat"),Vo=t(" and "),Vs=n("code"),Go=t("notifySlack"),Lo=t(" functions in this post and talk more about using promises like this in a separate post."),ca=f(),W=n("p"),Ho=t("Using the "),Gs=n("em"),qo=t("Vision"),Ro=t(" API to fetch labels from an image in Cloud Storage is as easy as:"),ha=f(),se=n("div"),ut=n("div"),vt=n("pre"),E=n("code"),Et=n("span"),Wo=t("function"),Uo=t(" "),mt=n("span"),Mo=t("visionFetchLabels"),$o=t("("),_t=n("span"),Bo=t("uri"),zo=t(`) {
	`),bt=n("span"),Yo=t("const"),Zo=t(" visionRequest = { "),gt=n("span"),Jo=t("source"),Ko=t(": { "),yt=n("span"),Qo=t("imageUri"),Xo=t(`: uri } }

	`),kt=n("span"),er=t("return"),tr=t(" vision."),St=n("span"),sr=t("labelDetection"),ar=t("(visionRequest)."),wt=n("span"),lr=t("then"),nr=t("("),Pt=n("span"),or=t("function"),rr=t(" ("),jt=n("span"),ir=t("results"),cr=t(`) {
		`),At=n("span"),hr=t("return"),pr=t(" results["),Nt=n("span"),fr=t("0"),dr=t("]."),Ct=n("span"),ur=t("labelAnnotations"),vr=t(`
	})
}`),pa=f(),U=n("p"),Er=t("The function returns a promise that fulfills to an array of label objects. The label objects contains a description and a score of how likely it is that the description matches the image. This information is used in "),Ls=n("code"),mr=t("isCat"),_r=t(" to determine if the image actually portraits a cat."),fa=f(),ae=n("div"),It=n("div"),Ft=n("pre"),g=n("code"),Dt=n("span"),br=t("function"),gr=t(" "),Tt=n("span"),yr=t("isCat"),kr=t("("),Ot=n("span"),Sr=t("label"),wr=t(`) {
	`),xt=n("span"),Pr=t("return"),jr=t(" label."),Vt=n("span"),Ar=t("description"),Nr=t("."),Gt=n("span"),Cr=t("indexOf"),Ir=t("("),Lt=n("span"),Fr=t("'cat'"),Dr=t(") !== -"),Ht=n("span"),Tr=t("1"),Or=t(" && label."),qt=n("span"),xr=t("score"),Vr=t(" > "),Rt=n("span"),Gr=t("0.8"),Lr=t(`
}`),da=f(),M=n("p"),Hr=t("This is a pretty naive implementation which simply checks if any of the label descriptions contain the word cat and whether the score is above "),Hs=n("code"),qr=t("0.8"),Rr=t(" (from 0-1.0)."),ua=f(),Wt=n("p"),Wr=t("Finally, if the image is determined to match a cat, it’s posted to Slack through a webhook, which is also very straight forward:"),va=f(),le=n("div"),Ut=n("div"),Mt=n("pre"),y=n("code"),$t=n("span"),Ur=t("function"),Mr=t(" "),Bt=n("span"),$r=t("notifySlack"),Br=t("("),zt=n("span"),zr=t("webhook, message"),Yr=t(`) {
	`),Yt=n("span"),Zr=t("return"),Jr=t(" "),Zt=n("span"),Kr=t("function"),Qr=t(" ("),qs=n("span"),Xr=t(`) {
		`),Jt=n("span"),ei=t("return"),ti=t(" request."),Kt=n("span"),si=t("post"),ai=t("(webhook)."),Qt=n("span"),li=t("send"),ni=t("({ "),Xt=n("span"),oi=t("text"),ri=t(`: message })
	}
}`),Ea=f(),es=n("p"),ii=t("The webhook is provided by Slack through creating a new App and adding an Incoming Webhook."),ma=f(),ts=n("h3"),ci=t("Deploying the function"),_a=f(),ss=n("p"),hi=t("The function is deployed to the cloud through the following command:"),ba=f(),ne=n("div"),as=n("div"),ls=n("pre"),oe=n("code"),pi=t("$ gcloud beta "),ns=n("span"),fi=t("functions"),di=t(" deploy --memory 128 catFinder --stage-bucket function-deploy-stage --trigger-bucket=catfinder-image-bucket"),ga=f(),O=n("p"),ui=t("The trigger type is specified to be a bucket (meaning in storage event) and the bucket ID is "),Rs=n("code"),vi=t("image-bucket-1"),Ei=t(". When deploying a function this way the current directory is zipped up and pushed to the "),Ws=n("code"),mi=t("stage-bucket"),_i=t(" which is then used to deploy the function in the cloud."),ya=f(),$=n("p"),bi=t("In the source root directory there is a small script called "),Us=n("code"),gi=t("deploy.sh"),yi=t(" that creates a DEPLOY directory and copies the correct files to it and runs the above command."),ka=f(),os=n("h2"),ki=t("Summary"),Sa=f(),rs=n("p"),Si=t("Cloud functions can be a great way to quickly setup some data transformation as a reaction on new files being uploaded. Or it can act as the backend for a callback from for example Slack, Github etc."),wa=f(),is=n("p"),wi=t("As demonstrated the deployment didn’t require any setup other than creating a Slack app to retrieve an incoming webhook and writing the event handler that is triggered by changes to a Storage bucket. If a lot of events are coming from the bucket, the Cloud Function service will automatically make sure that more handlers are executed to handle the incoming load."),Pa=f(),cs=n("p"),Pi=t("Hopefully this post showed some of the power of using FaaS solutions to react to events and create an integration between different services."),this.h()},l(l){G=o(l,"H2",{});var c=r(G);xa=s(c,"Google Cloud Functions (GCF)"),c.forEach(a),Ms=d(l),L=o(l,"P",{});var ja=r(L);Va=s(ja,"GCF is Googles version of AWS Lambda which provides a "),ds=o(ja,"EM",{});var Ai=r(ds);Ga=s(Ai,"“server less”"),Ai.forEach(a),La=s(ja," (in the sense that as a developer you don’t need to care about anything other than your code) service to run code in the cloud. This type of service is often called Function as a Service, or FaaS for short."),ja.forEach(a),$s=d(l),re=o(l,"P",{});var Ni=r(re);Ha=s(Ni,"It’s a perfect solution for event triggered small integrations or transformations. Such as a webhook for callbacks from various services. As a developer you only have to implement the event handler and can ignore any OS or HTTP Server setup or administration. The cloud provider takes care of all of that as well as scaling if load increases."),Ni.forEach(a),Bs=d(l),j=o(l,"P",{});var B=r(j);qa=s(B,"This of course comes with some constraints and in the case of Google Cloud Functions it means a function can be triggered by "),us=o(B,"EM",{});var Ci=r(us);Ra=s(Ci,"HTTPS requests"),Ci.forEach(a),Wa=s(B,", "),vs=o(B,"EM",{});var Ii=r(vs);Ua=s(Ii,"Cloud Storage Events"),Ii.forEach(a),Ma=s(B," or "),Es=o(B,"EM",{});var Fi=r(Es);$a=s(Fi,"Pub/Sub"),Fi.forEach(a),Ba=s(B,` and is (currently) limited
to Node.js v6.11.1.`),B.forEach(a),zs=d(l),ie=o(l,"H2",{});var Di=r(ie);za=s(Di,"The Catfinder function"),Di.forEach(a),Ys=d(l),ce=o(l,"P",{});var Ti=r(ce);Ya=s(Ti,"As an example of setting up an integration as a function this post will use a small function that integrates Google Cloud Storage, Google Vision and Slack. It works by getting a change event from a Cloud Storage bucket and send any new files to the Vision API to decide whether it’s an image of a cat. If it is, it will send a message to Slack notifying that a new cat picture was uploaded."),Ti.forEach(a),Zs=d(l),H=o(l,"P",{});var Aa=r(H);Za=s(Aa,"All the code for the project can be found at "),K=o(Aa,"A",{href:!0,rel:!0});var Oi=r(K);Ja=s(Oi,"Github"),Oi.forEach(a),Ka=s(Aa,"."),Aa.forEach(a),Js=d(l),he=o(l,"H3",{});var xi=r(he);Qa=s(xi,"Implementation"),xi.forEach(a),Ks=d(l),A=o(l,"P",{});var z=r(A);Xa=s(z,"A cloud function is a normal NPM module where the script pointed to by "),ms=o(z,"CODE",{});var Vi=r(ms);el=s(Vi,"main"),Vi.forEach(a),tl=s(z," in "),_s=o(z,"CODE",{});var Gi=r(_s);sl=s(Gi,"package.json"),Gi.forEach(a),al=s(z," needs to export a function with the same name as the function (by default, this can be overridden with the "),bs=o(z,"CODE",{});var Li=r(bs);ll=s(Li,"--entry-point"),Li.forEach(a),nl=s(z," flag when deploying)."),z.forEach(a),Qs=d(l),N=o(l,"P",{});var Y=r(N);ol=s(Y,"In our "),gs=o(Y,"CODE",{});var Hi=r(gs);rl=s(Hi,"package.json"),Hi.forEach(a),il=s(Y," the main module is defined to be "),ys=o(Y,"CODE",{});var qi=r(ys);cl=s(qi,"src/index.js"),qi.forEach(a),hl=s(Y," and the exported function is called "),ks=o(Y,"CODE",{});var Ri=r(ks);pl=s(Ri,"catFinder"),Ri.forEach(a),fl=s(Y,". The function has different signatures depending on the trigger mechanism. In the case of a bucket event it will have the signature:"),Y.forEach(a),Xs=d(l),Q=o(l,"DIV",{class:!0});var Wi=r(Q);pe=o(Wi,"DIV",{class:!0});var Ui=r(pe);fe=o(Ui,"PRE",{class:!0});var Mi=r(fe);C=o(Mi,"CODE",{});var V=r(C);de=o(V,"SPAN",{class:!0});var $i=r(de);dl=s($i,"exports"),$i.forEach(a),ul=s(V,"."),ue=o(V,"SPAN",{class:!0});var Bi=r(ue);vl=s(Bi,"catFinder"),Bi.forEach(a),El=s(V," = "),ve=o(V,"SPAN",{class:!0});var zi=r(ve);ml=s(zi,"function"),zi.forEach(a),_l=s(V," ("),Ee=o(V,"SPAN",{class:!0});var Yi=r(Ee);bl=s(Yi,"event, callback"),Yi.forEach(a),gl=s(V,") {}"),V.forEach(a),Mi.forEach(a),Ui.forEach(a),Wi.forEach(a),ea=d(l),D=o(l,"P",{});var hs=r(D);yl=s(hs,"The "),Ss=o(hs,"CODE",{});var Zi=r(Ss);kl=s(Zi,"event"),Zi.forEach(a),Sl=s(hs," contains information about the event, such as file name, bucket name, event type etc. The "),ws=o(hs,"CODE",{});var Ji=r(ws);wl=s(Ji,"callback"),Ji.forEach(a),Pl=s(hs," is used to notify that the function has finished."),hs.forEach(a),ta=d(l),me=o(l,"P",{});var Ki=r(me);jl=s(Ki,"The first thing we need to do is check that we care about the event, for this project only newly created files are interesting. In order to keep this logic out of the actual function implementation I’ve written a small helper that wraps the function and returns if the event doesn’t match the criteria."),Ki.forEach(a),sa=d(l),X=o(l,"DIV",{class:!0});var Qi=r(X);_e=o(Qi,"DIV",{class:!0});var Xi=r(_e);be=o(Xi,"PRE",{class:!0});var ec=r(be);p=o(ec,"CODE",{});var u=r(p);ge=o(u,"SPAN",{class:!0});var tc=r(ge);Al=s(tc,"// From src/google-cloud.js"),tc.forEach(a),Nl=s(u,`
`),ye=o(u,"SPAN",{class:!0});var sc=r(ye);Cl=s(sc,"function"),sc.forEach(a),Il=s(u," "),ke=o(u,"SPAN",{class:!0});var ac=r(ke);Fl=s(ac,"filteredEventHandler"),ac.forEach(a),Dl=s(u,"("),Se=o(u,"SPAN",{class:!0});var lc=r(Se);Tl=s(lc,"predicate, handler"),lc.forEach(a),Ol=s(u,`) {
  `),we=o(u,"SPAN",{class:!0});var nc=r(we);xl=s(nc,"return"),nc.forEach(a),Vl=s(u," "),Pe=o(u,"SPAN",{class:!0});var oc=r(Pe);Gl=s(oc,"function"),oc.forEach(a),Ll=s(u,"("),je=o(u,"SPAN",{class:!0});var rc=r(je);Hl=s(rc,"event, callback"),rc.forEach(a),ql=s(u,`) {
    `),Ae=o(u,"SPAN",{class:!0});var ic=r(Ae);Rl=s(ic,"if"),ic.forEach(a),Wl=s(u," ("),Ne=o(u,"SPAN",{class:!0});var cc=r(Ne);Ul=s(cc,"predicate"),cc.forEach(a),Ml=s(u,`(event)) {
      `),Ce=o(u,"SPAN",{class:!0});var hc=r(Ce);$l=s(hc,"handler"),hc.forEach(a),Bl=s(u,`(event, callback)
    } `),Ie=o(u,"SPAN",{class:!0});var pc=r(Ie);zl=s(pc,"else"),pc.forEach(a),Yl=s(u,` {
      `),Fe=o(u,"SPAN",{class:!0});var fc=r(Fe);Zl=s(fc,"callback"),fc.forEach(a),Jl=s(u,`()
    }
  }
}

`),De=o(u,"SPAN",{class:!0});var dc=r(De);Kl=s(dc,"// In index.js"),dc.forEach(a),Ql=s(u,`
`),Te=o(u,"SPAN",{class:!0});var uc=r(Te);Xl=s(uc,"exports"),uc.forEach(a),en=s(u,"."),Oe=o(u,"SPAN",{class:!0});var vc=r(Oe);tn=s(vc,"catFinder"),vc.forEach(a),sn=s(u," = "),xe=o(u,"SPAN",{class:!0});var Ec=r(xe);an=s(Ec,"filteredEventHandler"),Ec.forEach(a),ln=s(u,"(storageNewFileEventFilter, "),Ve=o(u,"SPAN",{class:!0});var mc=r(Ve);nn=s(mc,"function"),mc.forEach(a),on=s(u,"("),Ge=o(u,"SPAN",{class:!0});var _c=r(Ge);rn=s(_c,"event, callback"),_c.forEach(a),cn=s(u,`) {
  `),Le=o(u,"SPAN",{class:!0});var bc=r(Le);hn=s(bc,"// ..."),bc.forEach(a),pn=s(u,`
}`),u.forEach(a),ec.forEach(a),Xi.forEach(a),Qi.forEach(a),aa=d(l),I=o(l,"P",{});var Z=r(I);fn=s(Z,"The "),Ps=o(Z,"CODE",{});var gc=r(Ps);dn=s(gc,"storageNewFileEventFilter"),gc.forEach(a),un=s(Z," function takes in the event and checks whether it’s referring to a new file event. It checks that the resource still exists (otherwise it’s a delete event) and that the "),js=o(Z,"CODE",{});var yc=r(js);vn=s(yc,"metageneration"),yc.forEach(a),En=s(Z," is "),As=o(Z,"CODE",{});var kc=r(As);mn=s(kc,"1"),kc.forEach(a),_n=s(Z,", otherwise it’s an update event."),Z.forEach(a),la=d(l),ee=o(l,"DIV",{class:!0});var Sc=r(ee);He=o(Sc,"DIV",{class:!0});var wc=r(He);qe=o(wc,"PRE",{class:!0});var Pc=r(qe);b=o(Pc,"CODE",{});var k=r(b);Re=o(k,"SPAN",{class:!0});var jc=r(Re);bn=s(jc,"function"),jc.forEach(a),gn=s(k," "),We=o(k,"SPAN",{class:!0});var Ac=r(We);yn=s(Ac,"storageNewFileEventFilter"),Ac.forEach(a),kn=s(k,"("),Ue=o(k,"SPAN",{class:!0});var Nc=r(Ue);Sn=s(Nc,"event"),Nc.forEach(a),wn=s(k,`) {
	`),Me=o(k,"SPAN",{class:!0});var Cc=r(Me);Pn=s(Cc,"const"),Cc.forEach(a),jn=s(k," file = event."),$e=o(k,"SPAN",{class:!0});var Ic=r($e);An=s(Ic,"data"),Ic.forEach(a),Nn=s(k,`
	`),Be=o(k,"SPAN",{class:!0});var Fc=r(Be);Cn=s(Fc,"return"),Fc.forEach(a),In=s(k," file."),ze=o(k,"SPAN",{class:!0});var Dc=r(ze);Fn=s(Dc,"resourceState"),Dc.forEach(a),Dn=s(k," === "),Ye=o(k,"SPAN",{class:!0});var Tc=r(Ye);Tn=s(Tc,"'exists'"),Tc.forEach(a),On=s(k," && file."),Ze=o(k,"SPAN",{class:!0});var Oc=r(Ze);xn=s(Oc,"metageneration"),Oc.forEach(a),Vn=s(k," === "),Je=o(k,"SPAN",{class:!0});var xc=r(Je);Gn=s(xc,"'1'"),xc.forEach(a),Ln=s(k,`
}`),k.forEach(a),Pc.forEach(a),wc.forEach(a),Sc.forEach(a),na=d(l),q=o(l,"P",{});var Na=r(q);Hn=s(Na,"With the help of "),Ns=o(Na,"EM",{});var Vc=r(Ns);qn=s(Vc,"Promises"),Vc.forEach(a),Rn=s(Na," the rest of the event handler function is very straight forward."),Na.forEach(a),oa=d(l),te=o(l,"DIV",{class:!0});var Gc=r(te);Ke=o(Gc,"DIV",{class:!0});var Lc=r(Ke);Qe=o(Lc,"PRE",{class:!0});var Hc=r(Qe);v=o(Hc,"CODE",{});var m=r(v);Xe=o(m,"SPAN",{class:!0});var qc=r(Xe);Wn=s(qc,"const"),qc.forEach(a),Un=s(m," file = event."),et=o(m,"SPAN",{class:!0});var Rc=r(et);Mn=s(Rc,"data"),Rc.forEach(a),$n=s(m,`
`),tt=o(m,"SPAN",{class:!0});var Wc=r(tt);Bn=s(Wc,"const"),Wc.forEach(a),zn=s(m," storageUri = "),T=o(m,"SPAN",{class:!0});var ps=r(T);Yn=s(ps,"`gs://"),st=o(ps,"SPAN",{class:!0});var Uc=r(st);Zn=s(Uc,"${file.bucket}"),Uc.forEach(a),Jn=s(ps,"/"),at=o(ps,"SPAN",{class:!0});var Mc=r(at);Kn=s(Mc,"${file.name}"),Mc.forEach(a),Qn=s(ps,"`"),ps.forEach(a),Xn=s(m,`

`),lt=o(m,"SPAN",{class:!0});var $c=r(lt);eo=s($c,"return"),$c.forEach(a),to=s(m," "),nt=o(m,"SPAN",{class:!0});var Bc=r(nt);so=s(Bc,"visionFetchLabels"),Bc.forEach(a),ao=s(m,`(storageUri)
	.`),ot=o(m,"SPAN",{class:!0});var zc=r(ot);lo=s(zc,"then"),zc.forEach(a),no=s(m,"("),rt=o(m,"SPAN",{class:!0});var Yc=r(rt);oo=s(Yc,"any"),Yc.forEach(a),ro=s(m,`(isCat))
	.`),it=o(m,"SPAN",{class:!0});var Zc=r(it);io=s(Zc,"then"),Zc.forEach(a),co=s(m,"("),ct=o(m,"SPAN",{class:!0});var Jc=r(ct);ho=s(Jc,"notifySlack"),Jc.forEach(a),po=s(m,"(secrets."),ht=o(m,"SPAN",{class:!0});var Kc=r(ht);fo=s(Kc,"slackWebhook"),Kc.forEach(a),uo=s(m,", "),R=o(m,"SPAN",{class:!0});var Ca=r(R);vo=s(Ca,"`A cat was posted: "),pt=o(Ca,"SPAN",{class:!0});var Qc=r(pt);Eo=s(Qc,"${storageUri}"),Qc.forEach(a),mo=s(Ca,"`"),Ca.forEach(a),_o=s(m,`))
	.`),ft=o(m,"SPAN",{class:!0});var Xc=r(ft);bo=s(Xc,"then"),Xc.forEach(a),go=s(m,`(logSuccess, logError)
	.`),dt=o(m,"SPAN",{class:!0});var eh=r(dt);yo=s(eh,"then"),eh.forEach(a),ko=s(m,"(callback)"),m.forEach(a),Hc.forEach(a),Lc.forEach(a),Gc.forEach(a),ra=d(l),P=o(l,"OL",{});var x=r(P);Cs=o(x,"LI",{});var th=r(Cs);So=s(th,"Fetch the labels through Vision API"),th.forEach(a),wo=d(x),Is=o(x,"LI",{});var sh=r(Is);Po=s(sh,"If any of the labels match a cat"),sh.forEach(a),jo=d(x),Fs=o(x,"LI",{});var ah=r(Fs);Ao=s(ah,"Send a notification to the Slack through an incoming webhook"),ah.forEach(a),No=d(x),Ds=o(x,"LI",{});var lh=r(Ds);Co=s(lh,"If all succeeded, log that. Otherwise log if there was an error."),lh.forEach(a),Io=d(x),Ts=o(x,"LI",{});var nh=r(Ts);Fo=s(nh,"Finally, call the provided callback."),nh.forEach(a),x.forEach(a),ia=d(l),F=o(l,"P",{});var J=r(F);Do=s(J,"We’ll focus on the "),Os=o(J,"CODE",{});var oh=r(Os);To=s(oh,"visionFetchLabels"),oh.forEach(a),Oo=s(J,", "),xs=o(J,"CODE",{});var rh=r(xs);xo=s(rh,"isCat"),rh.forEach(a),Vo=s(J," and "),Vs=o(J,"CODE",{});var ih=r(Vs);Go=s(ih,"notifySlack"),ih.forEach(a),Lo=s(J," functions in this post and talk more about using promises like this in a separate post."),J.forEach(a),ca=d(l),W=o(l,"P",{});var Ia=r(W);Ho=s(Ia,"Using the "),Gs=o(Ia,"EM",{});var ch=r(Gs);qo=s(ch,"Vision"),ch.forEach(a),Ro=s(Ia," API to fetch labels from an image in Cloud Storage is as easy as:"),Ia.forEach(a),ha=d(l),se=o(l,"DIV",{class:!0});var hh=r(se);ut=o(hh,"DIV",{class:!0});var ph=r(ut);vt=o(ph,"PRE",{class:!0});var fh=r(vt);E=o(fh,"CODE",{});var _=r(E);Et=o(_,"SPAN",{class:!0});var dh=r(Et);Wo=s(dh,"function"),dh.forEach(a),Uo=s(_," "),mt=o(_,"SPAN",{class:!0});var uh=r(mt);Mo=s(uh,"visionFetchLabels"),uh.forEach(a),$o=s(_,"("),_t=o(_,"SPAN",{class:!0});var vh=r(_t);Bo=s(vh,"uri"),vh.forEach(a),zo=s(_,`) {
	`),bt=o(_,"SPAN",{class:!0});var Eh=r(bt);Yo=s(Eh,"const"),Eh.forEach(a),Zo=s(_," visionRequest = { "),gt=o(_,"SPAN",{class:!0});var mh=r(gt);Jo=s(mh,"source"),mh.forEach(a),Ko=s(_,": { "),yt=o(_,"SPAN",{class:!0});var _h=r(yt);Qo=s(_h,"imageUri"),_h.forEach(a),Xo=s(_,`: uri } }

	`),kt=o(_,"SPAN",{class:!0});var bh=r(kt);er=s(bh,"return"),bh.forEach(a),tr=s(_," vision."),St=o(_,"SPAN",{class:!0});var gh=r(St);sr=s(gh,"labelDetection"),gh.forEach(a),ar=s(_,"(visionRequest)."),wt=o(_,"SPAN",{class:!0});var yh=r(wt);lr=s(yh,"then"),yh.forEach(a),nr=s(_,"("),Pt=o(_,"SPAN",{class:!0});var kh=r(Pt);or=s(kh,"function"),kh.forEach(a),rr=s(_," ("),jt=o(_,"SPAN",{class:!0});var Sh=r(jt);ir=s(Sh,"results"),Sh.forEach(a),cr=s(_,`) {
		`),At=o(_,"SPAN",{class:!0});var wh=r(At);hr=s(wh,"return"),wh.forEach(a),pr=s(_," results["),Nt=o(_,"SPAN",{class:!0});var Ph=r(Nt);fr=s(Ph,"0"),Ph.forEach(a),dr=s(_,"]."),Ct=o(_,"SPAN",{class:!0});var jh=r(Ct);ur=s(jh,"labelAnnotations"),jh.forEach(a),vr=s(_,`
	})
}`),_.forEach(a),fh.forEach(a),ph.forEach(a),hh.forEach(a),pa=d(l),U=o(l,"P",{});var Fa=r(U);Er=s(Fa,"The function returns a promise that fulfills to an array of label objects. The label objects contains a description and a score of how likely it is that the description matches the image. This information is used in "),Ls=o(Fa,"CODE",{});var Ah=r(Ls);mr=s(Ah,"isCat"),Ah.forEach(a),_r=s(Fa," to determine if the image actually portraits a cat."),Fa.forEach(a),fa=d(l),ae=o(l,"DIV",{class:!0});var Nh=r(ae);It=o(Nh,"DIV",{class:!0});var Ch=r(It);Ft=o(Ch,"PRE",{class:!0});var Ih=r(Ft);g=o(Ih,"CODE",{});var S=r(g);Dt=o(S,"SPAN",{class:!0});var Fh=r(Dt);br=s(Fh,"function"),Fh.forEach(a),gr=s(S," "),Tt=o(S,"SPAN",{class:!0});var Dh=r(Tt);yr=s(Dh,"isCat"),Dh.forEach(a),kr=s(S,"("),Ot=o(S,"SPAN",{class:!0});var Th=r(Ot);Sr=s(Th,"label"),Th.forEach(a),wr=s(S,`) {
	`),xt=o(S,"SPAN",{class:!0});var Oh=r(xt);Pr=s(Oh,"return"),Oh.forEach(a),jr=s(S," label."),Vt=o(S,"SPAN",{class:!0});var xh=r(Vt);Ar=s(xh,"description"),xh.forEach(a),Nr=s(S,"."),Gt=o(S,"SPAN",{class:!0});var Vh=r(Gt);Cr=s(Vh,"indexOf"),Vh.forEach(a),Ir=s(S,"("),Lt=o(S,"SPAN",{class:!0});var Gh=r(Lt);Fr=s(Gh,"'cat'"),Gh.forEach(a),Dr=s(S,") !== -"),Ht=o(S,"SPAN",{class:!0});var Lh=r(Ht);Tr=s(Lh,"1"),Lh.forEach(a),Or=s(S," && label."),qt=o(S,"SPAN",{class:!0});var Hh=r(qt);xr=s(Hh,"score"),Hh.forEach(a),Vr=s(S," > "),Rt=o(S,"SPAN",{class:!0});var qh=r(Rt);Gr=s(qh,"0.8"),qh.forEach(a),Lr=s(S,`
}`),S.forEach(a),Ih.forEach(a),Ch.forEach(a),Nh.forEach(a),da=d(l),M=o(l,"P",{});var Da=r(M);Hr=s(Da,"This is a pretty naive implementation which simply checks if any of the label descriptions contain the word cat and whether the score is above "),Hs=o(Da,"CODE",{});var Rh=r(Hs);qr=s(Rh,"0.8"),Rh.forEach(a),Rr=s(Da," (from 0-1.0)."),Da.forEach(a),ua=d(l),Wt=o(l,"P",{});var Wh=r(Wt);Wr=s(Wh,"Finally, if the image is determined to match a cat, it’s posted to Slack through a webhook, which is also very straight forward:"),Wh.forEach(a),va=d(l),le=o(l,"DIV",{class:!0});var Uh=r(le);Ut=o(Uh,"DIV",{class:!0});var Mh=r(Ut);Mt=o(Mh,"PRE",{class:!0});var $h=r(Mt);y=o($h,"CODE",{});var w=r(y);$t=o(w,"SPAN",{class:!0});var Bh=r($t);Ur=s(Bh,"function"),Bh.forEach(a),Mr=s(w," "),Bt=o(w,"SPAN",{class:!0});var zh=r(Bt);$r=s(zh,"notifySlack"),zh.forEach(a),Br=s(w,"("),zt=o(w,"SPAN",{class:!0});var Yh=r(zt);zr=s(Yh,"webhook, message"),Yh.forEach(a),Yr=s(w,`) {
	`),Yt=o(w,"SPAN",{class:!0});var Zh=r(Yt);Zr=s(Zh,"return"),Zh.forEach(a),Jr=s(w," "),Zt=o(w,"SPAN",{class:!0});var Jh=r(Zt);Kr=s(Jh,"function"),Jh.forEach(a),Qr=s(w," ("),qs=o(w,"SPAN",{class:!0}),r(qs).forEach(a),Xr=s(w,`) {
		`),Jt=o(w,"SPAN",{class:!0});var Kh=r(Jt);ei=s(Kh,"return"),Kh.forEach(a),ti=s(w," request."),Kt=o(w,"SPAN",{class:!0});var Qh=r(Kt);si=s(Qh,"post"),Qh.forEach(a),ai=s(w,"(webhook)."),Qt=o(w,"SPAN",{class:!0});var Xh=r(Qt);li=s(Xh,"send"),Xh.forEach(a),ni=s(w,"({ "),Xt=o(w,"SPAN",{class:!0});var ep=r(Xt);oi=s(ep,"text"),ep.forEach(a),ri=s(w,`: message })
	}
}`),w.forEach(a),$h.forEach(a),Mh.forEach(a),Uh.forEach(a),Ea=d(l),es=o(l,"P",{});var tp=r(es);ii=s(tp,"The webhook is provided by Slack through creating a new App and adding an Incoming Webhook."),tp.forEach(a),ma=d(l),ts=o(l,"H3",{});var sp=r(ts);ci=s(sp,"Deploying the function"),sp.forEach(a),_a=d(l),ss=o(l,"P",{});var ap=r(ss);hi=s(ap,"The function is deployed to the cloud through the following command:"),ap.forEach(a),ba=d(l),ne=o(l,"DIV",{class:!0});var lp=r(ne);as=o(lp,"DIV",{class:!0});var np=r(as);ls=o(np,"PRE",{class:!0});var op=r(ls);oe=o(op,"CODE",{});var Ta=r(oe);pi=s(Ta,"$ gcloud beta "),ns=o(Ta,"SPAN",{class:!0});var rp=r(ns);fi=s(rp,"functions"),rp.forEach(a),di=s(Ta," deploy --memory 128 catFinder --stage-bucket function-deploy-stage --trigger-bucket=catfinder-image-bucket"),Ta.forEach(a),op.forEach(a),np.forEach(a),lp.forEach(a),ga=d(l),O=o(l,"P",{});var fs=r(O);ui=s(fs,"The trigger type is specified to be a bucket (meaning in storage event) and the bucket ID is "),Rs=o(fs,"CODE",{});var ip=r(Rs);vi=s(ip,"image-bucket-1"),ip.forEach(a),Ei=s(fs,". When deploying a function this way the current directory is zipped up and pushed to the "),Ws=o(fs,"CODE",{});var cp=r(Ws);mi=s(cp,"stage-bucket"),cp.forEach(a),_i=s(fs," which is then used to deploy the function in the cloud."),fs.forEach(a),ya=d(l),$=o(l,"P",{});var Oa=r($);bi=s(Oa,"In the source root directory there is a small script called "),Us=o(Oa,"CODE",{});var hp=r(Us);gi=s(hp,"deploy.sh"),hp.forEach(a),yi=s(Oa," that creates a DEPLOY directory and copies the correct files to it and runs the above command."),Oa.forEach(a),ka=d(l),os=o(l,"H2",{});var pp=r(os);ki=s(pp,"Summary"),pp.forEach(a),Sa=d(l),rs=o(l,"P",{});var fp=r(rs);Si=s(fp,"Cloud functions can be a great way to quickly setup some data transformation as a reaction on new files being uploaded. Or it can act as the backend for a callback from for example Slack, Github etc."),fp.forEach(a),wa=d(l),is=o(l,"P",{});var dp=r(is);wi=s(dp,"As demonstrated the deployment didn’t require any setup other than creating a Slack app to retrieve an incoming webhook and writing the event handler that is triggered by changes to a Storage bucket. If a lot of events are coming from the bucket, the Cloud Function service will automatically make sure that more handlers are executed to handle the incoming load."),dp.forEach(a),Pa=d(l),cs=o(l,"P",{});var up=r(cs);Pi=s(up,"Hopefully this post showed some of the power of using FaaS solutions to react to events and create an integration between different services."),up.forEach(a),this.h()},h(){i(K,"href","https://github.com/hallski/cat-finder"),i(K,"rel","nofollow"),i(de,"class","hljs-built_in"),i(ue,"class","hljs-property"),i(ve,"class","hljs-keyword"),i(Ee,"class","hljs-params"),i(fe,"class","highlight"),i(pe,"class","highlight"),i(Q,"class","highlighter-rouge language-javascript"),i(ge,"class","hljs-comment"),i(ye,"class","hljs-keyword"),i(ke,"class","hljs-title function_"),i(Se,"class","hljs-params"),i(we,"class","hljs-keyword"),i(Pe,"class","hljs-keyword"),i(je,"class","hljs-params"),i(Ae,"class","hljs-keyword"),i(Ne,"class","hljs-title function_"),i(Ce,"class","hljs-title function_"),i(Ie,"class","hljs-keyword"),i(Fe,"class","hljs-title function_"),i(De,"class","hljs-comment"),i(Te,"class","hljs-built_in"),i(Oe,"class","hljs-property"),i(xe,"class","hljs-title function_"),i(Ve,"class","hljs-keyword"),i(Ge,"class","hljs-params"),i(Le,"class","hljs-comment"),i(be,"class","highlight"),i(_e,"class","highlight"),i(X,"class","highlighter-rouge language-javascript"),i(Re,"class","hljs-keyword"),i(We,"class","hljs-title function_"),i(Ue,"class","hljs-params"),i(Me,"class","hljs-keyword"),i($e,"class","hljs-property"),i(Be,"class","hljs-keyword"),i(ze,"class","hljs-property"),i(Ye,"class","hljs-string"),i(Ze,"class","hljs-property"),i(Je,"class","hljs-string"),i(qe,"class","highlight"),i(He,"class","highlight"),i(ee,"class","highlighter-rouge language-javascript"),i(Xe,"class","hljs-keyword"),i(et,"class","hljs-property"),i(tt,"class","hljs-keyword"),i(st,"class","hljs-subst"),i(at,"class","hljs-subst"),i(T,"class","hljs-string"),i(lt,"class","hljs-keyword"),i(nt,"class","hljs-title function_"),i(ot,"class","hljs-title function_"),i(rt,"class","hljs-title function_"),i(it,"class","hljs-title function_"),i(ct,"class","hljs-title function_"),i(ht,"class","hljs-property"),i(pt,"class","hljs-subst"),i(R,"class","hljs-string"),i(ft,"class","hljs-title function_"),i(dt,"class","hljs-title function_"),i(Qe,"class","highlight"),i(Ke,"class","highlight"),i(te,"class","highlighter-rouge language-javascript"),i(Et,"class","hljs-keyword"),i(mt,"class","hljs-title function_"),i(_t,"class","hljs-params"),i(bt,"class","hljs-keyword"),i(gt,"class","hljs-attr"),i(yt,"class","hljs-attr"),i(kt,"class","hljs-keyword"),i(St,"class","hljs-title function_"),i(wt,"class","hljs-title function_"),i(Pt,"class","hljs-keyword"),i(jt,"class","hljs-params"),i(At,"class","hljs-keyword"),i(Nt,"class","hljs-number"),i(Ct,"class","hljs-property"),i(vt,"class","highlight"),i(ut,"class","highlight"),i(se,"class","highlighter-rouge language-javascript"),i(Dt,"class","hljs-keyword"),i(Tt,"class","hljs-title function_"),i(Ot,"class","hljs-params"),i(xt,"class","hljs-keyword"),i(Vt,"class","hljs-property"),i(Gt,"class","hljs-title function_"),i(Lt,"class","hljs-string"),i(Ht,"class","hljs-number"),i(qt,"class","hljs-property"),i(Rt,"class","hljs-number"),i(Ft,"class","highlight"),i(It,"class","highlight"),i(ae,"class","highlighter-rouge language-javascript"),i($t,"class","hljs-keyword"),i(Bt,"class","hljs-title function_"),i(zt,"class","hljs-params"),i(Yt,"class","hljs-keyword"),i(Zt,"class","hljs-keyword"),i(qs,"class","hljs-params"),i(Jt,"class","hljs-keyword"),i(Kt,"class","hljs-title function_"),i(Qt,"class","hljs-title function_"),i(Xt,"class","hljs-attr"),i(Mt,"class","highlight"),i(Ut,"class","highlight"),i(le,"class","highlighter-rouge language-javascript"),i(ns,"class","hljs-built_in"),i(ls,"class","highlight"),i(as,"class","highlight"),i(ne,"class","highlighter-rouge language-bash")},m(l,c){h(l,G,c),e(G,xa),h(l,Ms,c),h(l,L,c),e(L,Va),e(L,ds),e(ds,Ga),e(L,La),h(l,$s,c),h(l,re,c),e(re,Ha),h(l,Bs,c),h(l,j,c),e(j,qa),e(j,us),e(us,Ra),e(j,Wa),e(j,vs),e(vs,Ua),e(j,Ma),e(j,Es),e(Es,$a),e(j,Ba),h(l,zs,c),h(l,ie,c),e(ie,za),h(l,Ys,c),h(l,ce,c),e(ce,Ya),h(l,Zs,c),h(l,H,c),e(H,Za),e(H,K),e(K,Ja),e(H,Ka),h(l,Js,c),h(l,he,c),e(he,Qa),h(l,Ks,c),h(l,A,c),e(A,Xa),e(A,ms),e(ms,el),e(A,tl),e(A,_s),e(_s,sl),e(A,al),e(A,bs),e(bs,ll),e(A,nl),h(l,Qs,c),h(l,N,c),e(N,ol),e(N,gs),e(gs,rl),e(N,il),e(N,ys),e(ys,cl),e(N,hl),e(N,ks),e(ks,pl),e(N,fl),h(l,Xs,c),h(l,Q,c),e(Q,pe),e(pe,fe),e(fe,C),e(C,de),e(de,dl),e(C,ul),e(C,ue),e(ue,vl),e(C,El),e(C,ve),e(ve,ml),e(C,_l),e(C,Ee),e(Ee,bl),e(C,gl),h(l,ea,c),h(l,D,c),e(D,yl),e(D,Ss),e(Ss,kl),e(D,Sl),e(D,ws),e(ws,wl),e(D,Pl),h(l,ta,c),h(l,me,c),e(me,jl),h(l,sa,c),h(l,X,c),e(X,_e),e(_e,be),e(be,p),e(p,ge),e(ge,Al),e(p,Nl),e(p,ye),e(ye,Cl),e(p,Il),e(p,ke),e(ke,Fl),e(p,Dl),e(p,Se),e(Se,Tl),e(p,Ol),e(p,we),e(we,xl),e(p,Vl),e(p,Pe),e(Pe,Gl),e(p,Ll),e(p,je),e(je,Hl),e(p,ql),e(p,Ae),e(Ae,Rl),e(p,Wl),e(p,Ne),e(Ne,Ul),e(p,Ml),e(p,Ce),e(Ce,$l),e(p,Bl),e(p,Ie),e(Ie,zl),e(p,Yl),e(p,Fe),e(Fe,Zl),e(p,Jl),e(p,De),e(De,Kl),e(p,Ql),e(p,Te),e(Te,Xl),e(p,en),e(p,Oe),e(Oe,tn),e(p,sn),e(p,xe),e(xe,an),e(p,ln),e(p,Ve),e(Ve,nn),e(p,on),e(p,Ge),e(Ge,rn),e(p,cn),e(p,Le),e(Le,hn),e(p,pn),h(l,aa,c),h(l,I,c),e(I,fn),e(I,Ps),e(Ps,dn),e(I,un),e(I,js),e(js,vn),e(I,En),e(I,As),e(As,mn),e(I,_n),h(l,la,c),h(l,ee,c),e(ee,He),e(He,qe),e(qe,b),e(b,Re),e(Re,bn),e(b,gn),e(b,We),e(We,yn),e(b,kn),e(b,Ue),e(Ue,Sn),e(b,wn),e(b,Me),e(Me,Pn),e(b,jn),e(b,$e),e($e,An),e(b,Nn),e(b,Be),e(Be,Cn),e(b,In),e(b,ze),e(ze,Fn),e(b,Dn),e(b,Ye),e(Ye,Tn),e(b,On),e(b,Ze),e(Ze,xn),e(b,Vn),e(b,Je),e(Je,Gn),e(b,Ln),h(l,na,c),h(l,q,c),e(q,Hn),e(q,Ns),e(Ns,qn),e(q,Rn),h(l,oa,c),h(l,te,c),e(te,Ke),e(Ke,Qe),e(Qe,v),e(v,Xe),e(Xe,Wn),e(v,Un),e(v,et),e(et,Mn),e(v,$n),e(v,tt),e(tt,Bn),e(v,zn),e(v,T),e(T,Yn),e(T,st),e(st,Zn),e(T,Jn),e(T,at),e(at,Kn),e(T,Qn),e(v,Xn),e(v,lt),e(lt,eo),e(v,to),e(v,nt),e(nt,so),e(v,ao),e(v,ot),e(ot,lo),e(v,no),e(v,rt),e(rt,oo),e(v,ro),e(v,it),e(it,io),e(v,co),e(v,ct),e(ct,ho),e(v,po),e(v,ht),e(ht,fo),e(v,uo),e(v,R),e(R,vo),e(R,pt),e(pt,Eo),e(R,mo),e(v,_o),e(v,ft),e(ft,bo),e(v,go),e(v,dt),e(dt,yo),e(v,ko),h(l,ra,c),h(l,P,c),e(P,Cs),e(Cs,So),e(P,wo),e(P,Is),e(Is,Po),e(P,jo),e(P,Fs),e(Fs,Ao),e(P,No),e(P,Ds),e(Ds,Co),e(P,Io),e(P,Ts),e(Ts,Fo),h(l,ia,c),h(l,F,c),e(F,Do),e(F,Os),e(Os,To),e(F,Oo),e(F,xs),e(xs,xo),e(F,Vo),e(F,Vs),e(Vs,Go),e(F,Lo),h(l,ca,c),h(l,W,c),e(W,Ho),e(W,Gs),e(Gs,qo),e(W,Ro),h(l,ha,c),h(l,se,c),e(se,ut),e(ut,vt),e(vt,E),e(E,Et),e(Et,Wo),e(E,Uo),e(E,mt),e(mt,Mo),e(E,$o),e(E,_t),e(_t,Bo),e(E,zo),e(E,bt),e(bt,Yo),e(E,Zo),e(E,gt),e(gt,Jo),e(E,Ko),e(E,yt),e(yt,Qo),e(E,Xo),e(E,kt),e(kt,er),e(E,tr),e(E,St),e(St,sr),e(E,ar),e(E,wt),e(wt,lr),e(E,nr),e(E,Pt),e(Pt,or),e(E,rr),e(E,jt),e(jt,ir),e(E,cr),e(E,At),e(At,hr),e(E,pr),e(E,Nt),e(Nt,fr),e(E,dr),e(E,Ct),e(Ct,ur),e(E,vr),h(l,pa,c),h(l,U,c),e(U,Er),e(U,Ls),e(Ls,mr),e(U,_r),h(l,fa,c),h(l,ae,c),e(ae,It),e(It,Ft),e(Ft,g),e(g,Dt),e(Dt,br),e(g,gr),e(g,Tt),e(Tt,yr),e(g,kr),e(g,Ot),e(Ot,Sr),e(g,wr),e(g,xt),e(xt,Pr),e(g,jr),e(g,Vt),e(Vt,Ar),e(g,Nr),e(g,Gt),e(Gt,Cr),e(g,Ir),e(g,Lt),e(Lt,Fr),e(g,Dr),e(g,Ht),e(Ht,Tr),e(g,Or),e(g,qt),e(qt,xr),e(g,Vr),e(g,Rt),e(Rt,Gr),e(g,Lr),h(l,da,c),h(l,M,c),e(M,Hr),e(M,Hs),e(Hs,qr),e(M,Rr),h(l,ua,c),h(l,Wt,c),e(Wt,Wr),h(l,va,c),h(l,le,c),e(le,Ut),e(Ut,Mt),e(Mt,y),e(y,$t),e($t,Ur),e(y,Mr),e(y,Bt),e(Bt,$r),e(y,Br),e(y,zt),e(zt,zr),e(y,Yr),e(y,Yt),e(Yt,Zr),e(y,Jr),e(y,Zt),e(Zt,Kr),e(y,Qr),e(y,qs),e(y,Xr),e(y,Jt),e(Jt,ei),e(y,ti),e(y,Kt),e(Kt,si),e(y,ai),e(y,Qt),e(Qt,li),e(y,ni),e(y,Xt),e(Xt,oi),e(y,ri),h(l,Ea,c),h(l,es,c),e(es,ii),h(l,ma,c),h(l,ts,c),e(ts,ci),h(l,_a,c),h(l,ss,c),e(ss,hi),h(l,ba,c),h(l,ne,c),e(ne,as),e(as,ls),e(ls,oe),e(oe,pi),e(oe,ns),e(ns,fi),e(oe,di),h(l,ga,c),h(l,O,c),e(O,ui),e(O,Rs),e(Rs,vi),e(O,Ei),e(O,Ws),e(Ws,mi),e(O,_i),h(l,ya,c),h(l,$,c),e($,bi),e($,Us),e(Us,gi),e($,yi),h(l,ka,c),h(l,os,c),e(os,ki),h(l,Sa,c),h(l,rs,c),e(rs,Si),h(l,wa,c),h(l,is,c),e(is,wi),h(l,Pa,c),h(l,cs,c),e(cs,Pi)},p:ji,i:ji,o:ji,d(l){l&&a(G),l&&a(Ms),l&&a(L),l&&a($s),l&&a(re),l&&a(Bs),l&&a(j),l&&a(zs),l&&a(ie),l&&a(Ys),l&&a(ce),l&&a(Zs),l&&a(H),l&&a(Js),l&&a(he),l&&a(Ks),l&&a(A),l&&a(Qs),l&&a(N),l&&a(Xs),l&&a(Q),l&&a(ea),l&&a(D),l&&a(ta),l&&a(me),l&&a(sa),l&&a(X),l&&a(aa),l&&a(I),l&&a(la),l&&a(ee),l&&a(na),l&&a(q),l&&a(oa),l&&a(te),l&&a(ra),l&&a(P),l&&a(ia),l&&a(F),l&&a(ca),l&&a(W),l&&a(ha),l&&a(se),l&&a(pa),l&&a(U),l&&a(fa),l&&a(ae),l&&a(da),l&&a(M),l&&a(ua),l&&a(Wt),l&&a(va),l&&a(le),l&&a(Ea),l&&a(es),l&&a(ma),l&&a(ts),l&&a(_a),l&&a(ss),l&&a(ba),l&&a(ne),l&&a(ga),l&&a(O),l&&a(ya),l&&a($),l&&a(ka),l&&a(os),l&&a(Sa),l&&a(rs),l&&a(wa),l&&a(is),l&&a(Pa),l&&a(cs)}}}const yp={comments:!0,date:"2017-11-03T00:00:00Z",excerpt:"Google Cloud Functions are currently in beta but can already provide a great solution for integrating between different services triggered by various events.",redirect_from:"/blog/fun-with-gcf-vision-and-slack",section:"blog",tags:["javascript","google-cloud","FaaS"],title:"Building integrations with Google Cloud Functions"};class kp extends Ep{constructor(G){super(),mp(this,G,null,bp,_p,{})}}export{kp as default,yp as metadata};
