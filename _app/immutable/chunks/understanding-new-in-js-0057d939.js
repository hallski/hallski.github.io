import{S as is,i as hs,s as ds,k as l,q as e,a as E,l as r,m as n,r as s,h as o,c as y,n as d,b as p,D as t,B as Pe}from"./index-57d6417f.js";function ps(cs){let u,yt,Q,mt,jt,W,bt,Ct,nt,C,N,D,v,g,St,Ot,x,kt,Pt,I,At,Nt,ct,f,Dt,X,gt,xt,Y,It,Jt,$,Lt,Tt,tt,Vt,qt,it,m,Ht,et,Rt,Ut,ht,j,Bt,st,Mt,Zt,dt,S,J,L,c,T,zt,Ft,V,Gt,Kt,q,Qt,Wt,H,Xt,Yt,R,$t,te,U,B,ee,se,M,oe,ae,Z,le,re,z,ne,ce,F,ie,he,G,de,pe,pt,K,fe,ft,w,ot,ue,we,O,ve,at,_e,Ee,ye,k,me,lt,je,be,Ce,P,Se,rt,Oe,ke;return{c(){u=l("p"),yt=e("One of the things that confused me most when starting out with Javascript was "),Q=l("em"),mt=e("constructor"),jt=e(" functions. That’s because when used together with "),W=l("code"),bt=e("new"),Ct=e(" they look like a normal class in other langues."),nt=E(),C=l("div"),N=l("div"),D=l("pre"),v=l("code"),g=l("span"),St=e("const"),Ot=e(" instance = "),x=l("span"),kt=e("new"),Pt=e(" "),I=l("span"),At=e("Constructor"),Nt=e("()"),ct=E(),f=l("p"),Dt=e("However, they can also be called without the "),X=l("code"),gt=e("new"),xt=e(" keyword which will lead to "),Y=l("code"),It=e("this"),Jt=e(" pointing to the global object instead. The new ES6 "),$=l("code"),Lt=e("class"),Tt=e(" keyword fixes that by throwing an exception when called without "),tt=l("code"),Vt=e("new"),qt=e("."),it=E(),m=l("p"),Ht=e("So what does "),et=l("code"),Rt=e("new"),Ut=e(" do anyway?"),ht=E(),j=l("p"),Bt=e("After some research it seems we can simply implement our own "),st=l("code"),Mt=e("new"),Zt=e(" as a function like this:"),dt=E(),S=l("div"),J=l("div"),L=l("pre"),c=l("code"),T=l("span"),zt=e("function"),Ft=e(" "),V=l("span"),Gt=e("myNew"),Kt=e("("),q=l("span"),Qt=e("constructor, ...args"),Wt=e(`) {
	`),H=l("span"),Xt=e("const"),Yt=e(` newObj = {}
	newObj.`),R=l("span"),$t=e("__proto__"),te=e(" = constructor."),U=l("span"),B=l("span"),ee=e("prototype"),se=e(`
	`),M=l("span"),oe=e("const"),ae=e(" fromConstructor = constructor."),Z=l("span"),le=e("apply"),re=e(`(newObj, args)
	`),z=l("span"),ne=e("if"),ce=e(` (fromConstructor) {
		`),F=l("span"),ie=e("return"),he=e(` fromConstructor
	}
	`),G=l("span"),de=e("return"),pe=e(` newObj
}`),pt=E(),K=l("p"),fe=e("New is simply responsible for:"),ft=E(),w=l("ol"),ot=l("li"),ue=e("Creating a new object"),we=E(),O=l("li"),ve=e("Set it’s prototype to that of the constructors "),at=l("code"),_e=e("prototype"),Ee=e(" property"),ye=E(),k=l("li"),me=e("Call the constructor with "),lt=l("code"),je=e("this"),be=e(" bound to the newly created object."),Ce=E(),P=l("li"),Se=e("As constructors in Javascript are allowed to return a different object, "),rt=l("code"),Oe=e("new"),ke=e(" also needs to check if it did and return that instead when that’s the case."),this.h()},l(a){u=r(a,"P",{});var h=n(u);yt=s(h,"One of the things that confused me most when starting out with Javascript was "),Q=r(h,"EM",{});var Ae=n(Q);mt=s(Ae,"constructor"),Ae.forEach(o),jt=s(h," functions. That’s because when used together with "),W=r(h,"CODE",{});var Ne=n(W);bt=s(Ne,"new"),Ne.forEach(o),Ct=s(h," they look like a normal class in other langues."),h.forEach(o),nt=y(a),C=r(a,"DIV",{class:!0});var De=n(C);N=r(De,"DIV",{class:!0});var ge=n(N);D=r(ge,"PRE",{class:!0});var xe=n(D);v=r(xe,"CODE",{});var A=n(v);g=r(A,"SPAN",{class:!0});var Ie=n(g);St=s(Ie,"const"),Ie.forEach(o),Ot=s(A," instance = "),x=r(A,"SPAN",{class:!0});var Je=n(x);kt=s(Je,"new"),Je.forEach(o),Pt=s(A," "),I=r(A,"SPAN",{class:!0});var Le=n(I);At=s(Le,"Constructor"),Le.forEach(o),Nt=s(A,"()"),A.forEach(o),xe.forEach(o),ge.forEach(o),De.forEach(o),ct=y(a),f=r(a,"P",{});var _=n(f);Dt=s(_,"However, they can also be called without the "),X=r(_,"CODE",{});var Te=n(X);gt=s(Te,"new"),Te.forEach(o),xt=s(_," keyword which will lead to "),Y=r(_,"CODE",{});var Ve=n(Y);It=s(Ve,"this"),Ve.forEach(o),Jt=s(_," pointing to the global object instead. The new ES6 "),$=r(_,"CODE",{});var qe=n($);Lt=s(qe,"class"),qe.forEach(o),Tt=s(_," keyword fixes that by throwing an exception when called without "),tt=r(_,"CODE",{});var He=n(tt);Vt=s(He,"new"),He.forEach(o),qt=s(_,"."),_.forEach(o),it=y(a),m=r(a,"P",{});var ut=n(m);Ht=s(ut,"So what does "),et=r(ut,"CODE",{});var Re=n(et);Rt=s(Re,"new"),Re.forEach(o),Ut=s(ut," do anyway?"),ut.forEach(o),ht=y(a),j=r(a,"P",{});var wt=n(j);Bt=s(wt,"After some research it seems we can simply implement our own "),st=r(wt,"CODE",{});var Ue=n(st);Mt=s(Ue,"new"),Ue.forEach(o),Zt=s(wt," as a function like this:"),wt.forEach(o),dt=y(a),S=r(a,"DIV",{class:!0});var Be=n(S);J=r(Be,"DIV",{class:!0});var Me=n(J);L=r(Me,"PRE",{class:!0});var Ze=n(L);c=r(Ze,"CODE",{});var i=n(c);T=r(i,"SPAN",{class:!0});var ze=n(T);zt=s(ze,"function"),ze.forEach(o),Ft=s(i," "),V=r(i,"SPAN",{class:!0});var Fe=n(V);Gt=s(Fe,"myNew"),Fe.forEach(o),Kt=s(i,"("),q=r(i,"SPAN",{class:!0});var Ge=n(q);Qt=s(Ge,"constructor, ...args"),Ge.forEach(o),Wt=s(i,`) {
	`),H=r(i,"SPAN",{class:!0});var Ke=n(H);Xt=s(Ke,"const"),Ke.forEach(o),Yt=s(i,` newObj = {}
	newObj.`),R=r(i,"SPAN",{class:!0});var Qe=n(R);$t=s(Qe,"__proto__"),Qe.forEach(o),te=s(i," = constructor."),U=r(i,"SPAN",{class:!0});var We=n(U);B=r(We,"SPAN",{class:!0});var Xe=n(B);ee=s(Xe,"prototype"),Xe.forEach(o),We.forEach(o),se=s(i,`
	`),M=r(i,"SPAN",{class:!0});var Ye=n(M);oe=s(Ye,"const"),Ye.forEach(o),ae=s(i," fromConstructor = constructor."),Z=r(i,"SPAN",{class:!0});var $e=n(Z);le=s($e,"apply"),$e.forEach(o),re=s(i,`(newObj, args)
	`),z=r(i,"SPAN",{class:!0});var ts=n(z);ne=s(ts,"if"),ts.forEach(o),ce=s(i,` (fromConstructor) {
		`),F=r(i,"SPAN",{class:!0});var es=n(F);ie=s(es,"return"),es.forEach(o),he=s(i,` fromConstructor
	}
	`),G=r(i,"SPAN",{class:!0});var ss=n(G);de=s(ss,"return"),ss.forEach(o),pe=s(i,` newObj
}`),i.forEach(o),Ze.forEach(o),Me.forEach(o),Be.forEach(o),pt=y(a),K=r(a,"P",{});var os=n(K);fe=s(os,"New is simply responsible for:"),os.forEach(o),ft=y(a),w=r(a,"OL",{});var b=n(w);ot=r(b,"LI",{});var as=n(ot);ue=s(as,"Creating a new object"),as.forEach(o),we=y(b),O=r(b,"LI",{});var vt=n(O);ve=s(vt,"Set it’s prototype to that of the constructors "),at=r(vt,"CODE",{});var ls=n(at);_e=s(ls,"prototype"),ls.forEach(o),Ee=s(vt," property"),vt.forEach(o),ye=y(b),k=r(b,"LI",{});var _t=n(k);me=s(_t,"Call the constructor with "),lt=r(_t,"CODE",{});var rs=n(lt);je=s(rs,"this"),rs.forEach(o),be=s(_t," bound to the newly created object."),_t.forEach(o),Ce=y(b),P=r(b,"LI",{});var Et=n(P);Se=s(Et,"As constructors in Javascript are allowed to return a different object, "),rt=r(Et,"CODE",{});var ns=n(rt);Oe=s(ns,"new"),ns.forEach(o),ke=s(Et," also needs to check if it did and return that instead when that’s the case."),Et.forEach(o),b.forEach(o),this.h()},h(){d(g,"class","hljs-keyword"),d(x,"class","hljs-keyword"),d(I,"class","hljs-title class_"),d(D,"class","highlight"),d(N,"class","highlight"),d(C,"class","highlighter-rouge language-javascript"),d(T,"class","hljs-keyword"),d(V,"class","hljs-title function_"),d(q,"class","hljs-params"),d(H,"class","hljs-keyword"),d(R,"class","hljs-property"),d(B,"class","hljs-keyword"),d(U,"class","hljs-property"),d(M,"class","hljs-keyword"),d(Z,"class","hljs-title function_"),d(z,"class","hljs-keyword"),d(F,"class","hljs-keyword"),d(G,"class","hljs-keyword"),d(L,"class","highlight"),d(J,"class","highlight"),d(S,"class","highlighter-rouge language-javascript")},m(a,h){p(a,u,h),t(u,yt),t(u,Q),t(Q,mt),t(u,jt),t(u,W),t(W,bt),t(u,Ct),p(a,nt,h),p(a,C,h),t(C,N),t(N,D),t(D,v),t(v,g),t(g,St),t(v,Ot),t(v,x),t(x,kt),t(v,Pt),t(v,I),t(I,At),t(v,Nt),p(a,ct,h),p(a,f,h),t(f,Dt),t(f,X),t(X,gt),t(f,xt),t(f,Y),t(Y,It),t(f,Jt),t(f,$),t($,Lt),t(f,Tt),t(f,tt),t(tt,Vt),t(f,qt),p(a,it,h),p(a,m,h),t(m,Ht),t(m,et),t(et,Rt),t(m,Ut),p(a,ht,h),p(a,j,h),t(j,Bt),t(j,st),t(st,Mt),t(j,Zt),p(a,dt,h),p(a,S,h),t(S,J),t(J,L),t(L,c),t(c,T),t(T,zt),t(c,Ft),t(c,V),t(V,Gt),t(c,Kt),t(c,q),t(q,Qt),t(c,Wt),t(c,H),t(H,Xt),t(c,Yt),t(c,R),t(R,$t),t(c,te),t(c,U),t(U,B),t(B,ee),t(c,se),t(c,M),t(M,oe),t(c,ae),t(c,Z),t(Z,le),t(c,re),t(c,z),t(z,ne),t(c,ce),t(c,F),t(F,ie),t(c,he),t(c,G),t(G,de),t(c,pe),p(a,pt,h),p(a,K,h),t(K,fe),p(a,ft,h),p(a,w,h),t(w,ot),t(ot,ue),t(w,we),t(w,O),t(O,ve),t(O,at),t(at,_e),t(O,Ee),t(w,ye),t(w,k),t(k,me),t(k,lt),t(lt,je),t(k,be),t(w,Ce),t(w,P),t(P,Se),t(P,rt),t(rt,Oe),t(P,ke)},p:Pe,i:Pe,o:Pe,d(a){a&&o(u),a&&o(nt),a&&o(C),a&&o(ct),a&&o(f),a&&o(it),a&&o(m),a&&o(ht),a&&o(j),a&&o(dt),a&&o(S),a&&o(pt),a&&o(K),a&&o(ft),a&&o(w)}}}const us={comments:null,date:"2017-09-20T00:00:00Z",section:"blog",tags:["javascript"],title:"Understanding 'new' in JS"};class ws extends is{constructor(u){super(),hs(this,u,null,ps,ds,{})}}export{ws as default,us as metadata};
